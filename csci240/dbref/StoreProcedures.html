<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Store Procedures &mdash; CSCI 240</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/togglebutton.css" type="text/css" />
      <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="../_static/mystnb.css" type="text/css" />
      <link rel="stylesheet" href="../_static/sphinx-thebe.css" type="text/css" />
      <link rel="stylesheet" href="../_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
        <script src="../_static/clipboard.min.js"></script>
        <script src="../_static/copybutton.js"></script>
        <script src="../_static/scripts/sphinx-book-theme.js?digest=9c920249402e914e316237a7dbc6769907cce411"></script>
        <script>let toggleHintShow = 'Click to show';</script>
        <script>let toggleHintHide = 'Click to hide';</script>
        <script>let toggleOpenOnPrint = 'true';</script>
        <script src="../_static/togglebutton.js"></script>
        <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
        <script src="../_static/design-tabs.js"></script>
        <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
        <script async="async" src="../_static/sphinx-thebe.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Triggers" href="Triggers.html" />
    <link rel="prev" title="Indexes" href="Indexes.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #000080" >
            <a href="../intro.html" class="icon icon-home"> CSCI 240
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="RelationalDatabases.html">Relational Databases</a></li>
<li class="toctree-l1"><a class="reference internal" href="MySQLFundamentals.html">MySQL Fundamentals</a></li>
<li class="toctree-l1"><a class="reference internal" href="CreatingDatabasesAndTables.html">Creating Databases and Tables</a></li>
<li class="toctree-l1"><a class="reference internal" href="DataDefinitionLanguage.html">Data Definition Language - DDL</a></li>
<li class="toctree-l1"><a class="reference internal" href="DataQueryLanguage.html">Data Query Language - DQL</a></li>
<li class="toctree-l1"><a class="reference internal" href="DataManipulationLanguage.html">Data Manipulation Language - DML</a></li>
<li class="toctree-l1"><a class="reference internal" href="Datatypes.html">Datatypes</a></li>
<li class="toctree-l1"><a class="reference internal" href="Cascade_Deletes.html">Cascade Deletes</a></li>
<li class="toctree-l1"><a class="reference internal" href="SingleFileQueries.html">Single File Queries</a></li>
<li class="toctree-l1"><a class="reference internal" href="MultiTableJoins.html">Multi Table Joins</a></li>
<li class="toctree-l1"><a class="reference internal" href="ForeignKeysandCascading.html">Foreign Keys and Cascading</a></li>
<li class="toctree-l1"><a class="reference internal" href="Views.html">Views</a></li>
<li class="toctree-l1"><a class="reference internal" href="Indexes.html">Indexes</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Store Procedures</a></li>
<li class="toctree-l1"><a class="reference internal" href="Triggers.html">Triggers</a></li>
<li class="toctree-l1"><a class="reference internal" href="Events.html">Events</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #000080" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../intro.html">CSCI 240</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../intro.html" class="icon icon-home"></a></li>
      <li class="breadcrumb-item active">Store Procedures</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/dbref/StoreProcedures.md" rel="nofollow"> View page source</a>
      </li>
  </ul><div class="rst-breadcrumbs-buttons" role="navigation" aria-label="Sequential page navigation">
        <a href="Indexes.html" class="btn btn-neutral float-left" title="Indexes" accesskey="p"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="Triggers.html" class="btn btn-neutral float-right" title="Triggers" accesskey="n">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
  </div>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section class="tex2jax_ignore mathjax_ignore" id="store-procedures">
<h1>Store Procedures<a class="headerlink" href="#store-procedures" title="Permalink to this heading"></a></h1>
<section id="definition">
<h2>Definition<a class="headerlink" href="#definition" title="Permalink to this heading"></a></h2>
<p>A stored procedure is a set of SQL statements that are stored in a database and can be called by name. They are used to group together SQL statements that are executed frequently, which can improve performance and reduce errors. Stored procedures can also be used to enforce security and encapsulate business logic, making it easier to maintain and update the database.</p>
</section>
<section id="advantages">
<h2>Advantages<a class="headerlink" href="#advantages" title="Permalink to this heading"></a></h2>
<ul>
<li><p>Code reusability.</p></li>
<li><p>Lesser Network transfer</p></li>
<li><p>More secure – The Database Administrator
can GRANT or REVOKE privileges at a procedure level.</p></li>
<li><p>Modularised code structure.</p>
<p><a class="reference external" href="https://www.softwaretestinghelp.com/mysql-stored-procedure/#Advantages">https://www.softwaretestinghelp.com/mysql-stored-procedure/#Advantages</a></p>
</li>
</ul>
<div class="highlight-mysql notranslate"><div class="highlight"><pre><span></span><span class="c1">-- Stored Procedures</span><span class="w"></span>
<span class="w"> </span>
<span class="c1">-- We change the delimiter to indicate what is </span><span class="w"></span>
<span class="c1">-- part of the store procedure vs what is an SQL command</span><span class="w"></span>
<span class="c1">-- outside a stored procedure</span><span class="w"></span>
<span class="c1">-- We can change the delimiter to anything we want.</span><span class="w"></span>

<span class="n">DELIMITER</span><span class="w"> </span><span class="n">$$</span><span class="w"></span>

<span class="k">CREATE</span><span class="w"> </span><span class="k">OR</span><span class="w"> </span><span class="k">REPLACE</span><span class="w"> </span><span class="k">PROCEDURE</span><span class="w"> </span><span class="n">pro_Payments</span><span class="p">()</span><span class="w"></span>

<span class="w">  </span><span class="k">BEGIN</span><span class="w"> </span>
<span class="w">	  </span><span class="c1">-- SQL Statements Go Here</span><span class="w"></span>
<span class="w">	  </span><span class="c1">-- These can also include SQL statements to </span><span class="w"></span>
<span class="w">	  </span><span class="c1">-- create tables, views, users, and set priviledges</span><span class="w"></span>
<span class="w">	  </span>
<span class="w">      </span><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span>
<span class="w">      </span><span class="k">FROM</span><span class="w"> </span><span class="n">payments</span><span class="w"></span>
<span class="w">      </span><span class="k">LIMIT</span><span class="w"> </span><span class="mi">25</span><span class="p">;</span><span class="w"></span>

<span class="w">  </span><span class="k">END</span><span class="w"> </span><span class="n">$$</span><span class="w"></span>

<span class="c1">-- change the delimiter back to </span><span class="w"></span>
<span class="n">DELIMITER</span><span class="w"> </span><span class="p">;</span><span class="w"></span>

<span class="c1">-- excecute the stored procedure</span><span class="w"></span>
<span class="k">CALL</span><span class="w"> </span><span class="n">pro_Payments</span><span class="p">();</span><span class="w"></span>

<span class="c1">-- ------------- Another Example -------------------------</span><span class="w"></span>

<span class="n">DELIMITER</span><span class="w"> </span><span class="n">$$</span><span class="w"></span>

<span class="c1">-- here we are creating a stored procedure that will </span><span class="w"></span>
<span class="c1">-- take input. Note the key word &quot;IN&quot; which means input</span><span class="w"></span>
<span class="c1">-- we then define a variable name and the data type</span><span class="w"></span>

<span class="k">CREATE</span><span class="w"> </span><span class="k">PROCEDURE</span><span class="w"> </span><span class="n">pro_Payments2</span><span class="p">(</span><span class="k">IN</span><span class="w"> </span><span class="n">payAmount</span><span class="w"> </span><span class="kt">DECIMAL</span><span class="p">)</span><span class="w"></span>

<span class="w">  </span><span class="k">BEGIN</span><span class="w"> </span>

<span class="w">  	</span><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">payments</span><span class="w"></span>
<span class="w">    	</span><span class="k">WHERE</span><span class="w"> </span><span class="n">amount</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="n">payAmount</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="k">END</span><span class="w"> </span><span class="n">$$</span><span class="w"></span>

<span class="n">DELIMITER</span><span class="w"> </span><span class="p">;</span><span class="w"></span>

<span class="k">call</span><span class="w"> </span><span class="n">pro_Payments2</span><span class="p">(</span><span class="mi">70000</span><span class="p">);</span><span class="w"></span>

<span class="c1">-- ------------- Another Example -------------------------</span><span class="w"></span>

<span class="c1">-- Here is a query to show stored procedures</span><span class="w"></span>
<span class="k">SELECT</span><span class="w">  </span><span class="n">routine_schema</span><span class="p">,</span><span class="w">  </span>
<span class="w">        </span><span class="n">routine_name</span><span class="p">,</span><span class="w">  </span>
<span class="w">        </span><span class="n">routine_type</span><span class="w"> </span>
<span class="k">FROM</span><span class="w"> </span><span class="n">information_schema</span><span class="p">.</span><span class="n">routines</span><span class="w"> </span>
<span class="k">WHERE</span><span class="w"> </span><span class="n">routine_schema</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;classicmodels&#39;</span><span class="w"> </span>
<span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">routine_name</span><span class="p">;</span><span class="w"></span>

<span class="c1">-- Turn this into a stored procedure</span><span class="w"></span>

<span class="n">DELIMITER</span><span class="w"> </span><span class="o">//</span><span class="w"></span>

<span class="k">CREATE</span><span class="w"> </span><span class="k">OR</span><span class="w"> </span><span class="k">REPLACE</span><span class="w"> </span><span class="k">PROCEDURE</span><span class="w"> </span><span class="n">pro_ListProcedures</span><span class="p">(</span><span class="k">IN</span><span class="w"> </span><span class="n">procName</span><span class="w"> </span><span class="kt">VARCHAR</span><span class="p">(</span><span class="mi">255</span><span class="p">))</span><span class="w"></span>

<span class="w">  </span><span class="k">BEGIN</span><span class="w"> </span>

<span class="w">    </span><span class="k">SELECT</span><span class="w">  </span><span class="n">routine_schema</span><span class="p">,</span><span class="w">  </span>
<span class="w">            </span><span class="n">routine_name</span><span class="p">,</span><span class="w">  </span>
<span class="w">            </span><span class="n">routine_type</span><span class="w"> </span>
<span class="w">    </span><span class="k">FROM</span><span class="w"> </span><span class="n">information_schema</span><span class="p">.</span><span class="n">routines</span><span class="w"> </span>
<span class="w">    </span><span class="k">WHERE</span><span class="w"> </span><span class="n">routine_schema</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;classicmodels&#39;</span><span class="w"> </span>
<span class="w">    </span><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">routine_name</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span>
<span class="k">END</span><span class="w"> </span><span class="o">//</span><span class="w"></span>

<span class="n">DELIMITER</span><span class="w"> </span><span class="p">;</span><span class="w"></span>

<span class="k">CALL</span><span class="w"> </span><span class="n">pro_ListProcedures</span><span class="p">(</span><span class="s1">&#39;classicmodels&#39;</span><span class="p">);</span><span class="w"></span>


<span class="c1">-- -------------- Helpful  query ----------------------------------</span><span class="w"></span>
<span class="k">SHOW</span><span class="w"> </span><span class="k">FULL</span><span class="w"> </span><span class="k">TABLES</span><span class="w"> </span><span class="k">IN</span><span class="w"> </span><span class="n">classicmodels</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">TABLE_TYPE</span><span class="w"> </span><span class="k">LIKE</span><span class="w"> </span><span class="s1">&#39;VIEW&#39;</span><span class="p">;</span><span class="w"></span>


<span class="c1">-- -------- Here is an example of a stored procedure to  list views --------------</span><span class="w"></span>


<span class="n">DELIMITER</span><span class="w"> </span><span class="o">//</span><span class="w"></span>



<span class="k">CREATE</span><span class="w"> </span><span class="k">OR</span><span class="w"> </span><span class="k">REPLACE</span><span class="w"> </span><span class="k">PROCEDURE</span><span class="w"> </span><span class="n">proc_ListViews</span><span class="p">(</span><span class="k">IN</span><span class="w"> </span><span class="n">theDBName</span><span class="w"> </span><span class="kt">VARCHAR</span><span class="p">(</span><span class="mi">255</span><span class="p">))</span><span class="w"></span>

<span class="w">  </span><span class="k">BEGIN</span><span class="w"> </span>

<span class="w">      </span><span class="k">SELECT</span><span class="w"> </span><span class="n">TABLE_SCHEMA</span><span class="p">,</span><span class="w"> </span><span class="k">TABLE_NAME</span><span class="w"> </span>
<span class="w">      </span><span class="k">FROM</span><span class="w"> </span><span class="n">information_schema</span><span class="p">.</span><span class="k">tables</span><span class="w"> </span>
<span class="w">      </span><span class="k">WHERE</span><span class="w"> </span><span class="n">TABLE_TYPE</span><span class="w"> </span><span class="k">LIKE</span><span class="w"> </span><span class="s1">&#39;VIEW&#39;</span><span class="w"></span>
<span class="w">          </span><span class="k">AND</span><span class="w"> </span><span class="n">TABLE_SCHEMA</span><span class="w"> </span><span class="k">LIKE</span><span class="w"> </span><span class="n">theDBName</span><span class="p">;</span><span class="w"></span>

<span class="w">	</span><span class="k">END</span><span class="w"> </span><span class="o">//</span><span class="w"></span>

<span class="n">DELIMITER</span><span class="w"> </span><span class="p">;</span><span class="w"></span>

<span class="k">CALL</span><span class="w"> </span><span class="n">proc_ListViews</span><span class="p">(</span><span class="s1">&#39;classicmodels&#39;</span><span class="p">);</span><span class="w"></span>


<span class="c1">-- Another example --</span><span class="w"></span>

<span class="n">DELIMITER</span><span class="w"></span>
</pre></div>
</div>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./dbref"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="Indexes.html" class="btn btn-neutral float-left" title="Indexes" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="Triggers.html" class="btn btn-neutral float-right" title="Triggers" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023 By James Goudy.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>