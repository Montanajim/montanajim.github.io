<!DOCTYPE html>
<html lang="en-gb">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">


<title>CSCI 210 - Passwords</title>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css" integrity="sha256-NuCn4IvuZXdBaFKJOAcsU2Q3ZpwbdFisd5dux4jkQ5w=" crossorigin="anonymous"/>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.4.1/dist/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.4.1/dist/css/bootstrap-theme.min.css" integrity="sha256-8uHMIn1ru0GS5KO+zf7Zccf8Uw12IA5DrdEcmMuWLFM=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tooltipster@4.2.8/dist/css/tooltipster.bundle.min.css" integrity="sha256-Qc4lCfqZWYaHF5hgEOFrYzSIX9Rrxk0NPHRac+08QeQ=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tooltipster@4.2.8/dist/css/plugins/tooltipster/sideTip/themes/tooltipster-sideTip-light.min.css" integrity="sha256-Wa1I4jhSXeWd3N6RhfPlkqr1WlT+zS3Vh2YGCg0129E=" crossorigin="anonymous">
<link href="https://fonts.googleapis.com/css?family=Open+Sans|Source+Code+Pro|Source+Sans+Pro|Source+Serif+Pro|Roboto|Roboto+Mono" rel="stylesheet">
<link href="https://fonts.red-dove.com/iosevka-ss09-regular/webfont.css" rel="stylesheet">

    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/css/sizzle.css" type="text/css" />
    <link rel="stylesheet" href="../_static/togglebutton.css" type="text/css" />
    <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />
    <link rel="stylesheet" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" type="text/css" />
    <link rel="stylesheet" href="../_static/sphinx-thebe.css" type="text/css" />
    <link rel="stylesheet" href="../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" type="text/css" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.1/jquery.min.js" integrity="sha512-aVKKRRi/Q/YV+4mjoKBsE4x3H+BkegoM/em46NNlCqNTmUYADjBbeNefNxYV7giUp0VxICtqdrbqU7iVaeZNXA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@3.4.1/dist/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.13.6/underscore-min.js" integrity="sha512-2V49R8ndaagCOnwmj8QnbT1Gz/rie17UouD9Re5WxbzRVUGoftCu5IuqqtAM9+UC3fwfHCSJR1hkzNQh/2wdtg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdn.jsdelivr.net/npm/tooltipster@4.2.8/dist/js/tooltipster.bundle.min.js" integrity="sha256-v8akIv8SCqn5f3mbVB7vEWprIizxPh6oV0yhao/dbB4=" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script>
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        LINK_SUFFIX: '.html',
        HAS_SOURCE:  false,
        SOURCELINK_SUFFIX: ''
      };
      $(document).data('sizzle', {on_load: []});
    </script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <script src="../app-data.js"></script>
<link rel="index" title="Index" href="../genindex.html" />
<link rel="search" title="Search" href="../search.html" />
<link rel="next" title="Add Edit Delete" href="AddEditDelete.html" />
<link rel="prev" title="PHP String Sanitation" href="PHPStringSanitation.html" />

</head>
<body class="full-height test">
<noscript>
  <div>
    <div id="noscript-message">JavaScript is not enabled. It is needed for this website to work.</div>
  </div>
</noscript>
<div id="whole-page" class="container-fluid content full-height">
  <div id="header-row" class="row">
    <div id="header-container" class="col-md-12">
      <div id="hdr-left">
        <i class="fa fa-bars menu-toggle"></i>
        
<a href="../index.html" class="text-logo">Web Programming</a>

      </div>
      <div id="hdr-centre" class="text-center stretch">
        <h3 title="Passwords">Passwords</h3>
        <h6>Passwords</h6>
      </div>
      <div id="hdr-search">
        
<div class="input-group" title="Enter something to search for and then either press Enter or click the magnifying glass">
  <input type="text" class="form-control search-query" placeholder="Search docs ...">
  <div class="input-group-addon">
    <i class="fa fa-search"></i>
  </div>
</div>
      </div>

      <div id="hdr-index">
        <a href="../genindex.html" class="btn btn-default" title="Go to the index"><i class="fa fa-list"></i></a>
      </div>

      <div id="hdr-source">
        <a href="../_sources/wpref/Passwords.md" class="btn btn-default" title="See the source for this page"><i class="fa fa-code"></i></a>
      </div>

      <div id="hdr-right">
        
  
  <div class="prev-next">
    
      <div class="pull-left">
        <a class="btn btn-default prev" href="PHPStringSanitation.html" title="Previous chapter (PHP String Sanitation)"><i class="fa fa-chevron-left mr-1em" aria-hidden="true"></i><span class="btn-text">PHP String Sanitation</span></a>
      </div>
    
      <div class="pull-right">
        <a class="btn btn-default next" href="AddEditDelete.html" title="Next chapter (Add Edit Delete)"><span class="btn-text">Add Edit Delete</span>&nbsp;<i class="fa fa-chevron-right ml-1em" aria-hidden="true"></i></a>
      </div>
    </div>
  
      </div>
      <div id="alt-hdr-right">

        <a href="PHPStringSanitation.html"><i class="fa fa-chevron-left mr-8"></i></a>


        <a href="../index.html"><i class="fa fa-home mr-8"></i></a>


        <a href="../search.html"><i class="fa fa-search mr-8"></i></a>


        <a href="../genindex.html"><i class="fa fa-list mr-8"></i></a>


        <a href="AddEditDelete.html"><i class="fa fa-chevron-right"></i></a>

      </div>
    </div>
  </div>

  <div id="content-row" class="row">
    <div id="page-content" class="col-md-12 flex-col">
      <div id="content-container">
        <div id="nav">
          
  <div class="navsidebar">
    <div id="sidebar-search">
      
<div class="input-group" title="Enter something to search for and then either press Enter or click the magnifying glass">
  <input type="text" class="form-control search-query" placeholder="Search docs ...">
  <div class="input-group-addon">
    <i class="fa fa-search"></i>
  </div>
</div>
    </div>
      <div class="sidebar-block">
        <div class="sidebar-tocheading">
          <div class="pull-left">
            <h2>Table Of Contents</h2>
          </div>
          <div class="pull-right" title="Hide this sidebar (hover at left edge to bring it back)"><i class="fa fa-chevron-left hidetoc"></i></div>
        </div>
        <div class="sidebar-toc">
      
          <div id="toc-filter" title="Type in here to show only matching topics">
            <input class="form-control" id="toc-filter-query" placeholder="Filter by title ...">
          </div>
      
        
  
    <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="PHPIntroduction.html">PHP Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="PHPBasics.html">PHP Basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="phparrays.html">PHP Arrays</a></li>
<li class="toctree-l1"><a class="reference internal" href="FirstFormsPOSTandGET.html">First Forms - POST and GET</a></li>
<li class="toctree-l1"><a class="reference internal" href="HTMLInputFieldReview.html">HTML Input Field Review</a></li>
<li class="toctree-l1"><a class="reference internal" href="SessionVariables.html">Session Variables</a><ul>
<li class="toctree-l2"><a class="reference internal" href="SessionHomeworkHint.html">Session Variable Homework Assignment Hint</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="PDOConnections.html">PDO Connections</a><ul>
<li class="toctree-l2"><a class="reference internal" href="PDOFirstDataDBInsertCarExample.html">PDO - First Data Insert - Car Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="PDONoPlaceHoldersExample.html">PDO With No Named Placeholders</a></li>
<li class="toctree-l2"><a class="reference internal" href="PHPStringSanitation.html">PHP String Sanitation</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#passwords">Passwords</a></li>
<li class="toctree-l1"><a class="reference internal" href="AddEditDelete.html">Add Edit Delete</a></li>
<li class="toctree-l1"><a class="reference internal" href="SavingPicturesInDatabase.html">Saving Pictures In Database</a></li>
</ul>

  
        </div>
      </div>
  </div>
        </div>
        <div id="content" tabindex="0" class="stretch">
          <div id="mnav">
            
  
    <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="PHPIntroduction.html">PHP Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="PHPBasics.html">PHP Basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="phparrays.html">PHP Arrays</a></li>
<li class="toctree-l1"><a class="reference internal" href="FirstFormsPOSTandGET.html">First Forms - POST and GET</a></li>
<li class="toctree-l1"><a class="reference internal" href="HTMLInputFieldReview.html">HTML Input Field Review</a></li>
<li class="toctree-l1"><a class="reference internal" href="SessionVariables.html">Session Variables</a><ul>
<li class="toctree-l2"><a class="reference internal" href="SessionHomeworkHint.html">Session Variable Homework Assignment Hint</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="PDOConnections.html">PDO Connections</a><ul>
<li class="toctree-l2"><a class="reference internal" href="PDOFirstDataDBInsertCarExample.html">PDO - First Data Insert - Car Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="PDONoPlaceHoldersExample.html">PDO With No Named Placeholders</a></li>
<li class="toctree-l2"><a class="reference internal" href="PHPStringSanitation.html">PHP String Sanitation</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#passwords">Passwords</a></li>
<li class="toctree-l1"><a class="reference internal" href="AddEditDelete.html">Add Edit Delete</a></li>
<li class="toctree-l1"><a class="reference internal" href="SavingPicturesInDatabase.html">Saving Pictures In Database</a></li>
</ul>

  
          </div>
          <div class="body">
            
  <div class="tex2jax_ignore mathjax_ignore section" id="passwords">
<h1>Passwords<a class="headerlink" href="#passwords" title="Permalink to this heading">¶</a></h1>
<div class="section" id="key-ideas">
<h2>Key Ideas<a class="headerlink" href="#key-ideas" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li>password_hash()</li>
<li>password_verify()</li>
<li>hashing</li>
<li>salts</li>
</ul>
</div>
<div class="section" id="how-php-passwords-work">
<h2>How PHP Passwords Work<a class="headerlink" href="#how-php-passwords-work" title="Permalink to this heading">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">password_hash()</span></code> is a PHP function that creates a password hash using a strong one-way hashing algorithm  The following algorithms are currently supported:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">PASSWORD_DEFAULT</span></code>: Uses the bcrypt algorithm (default as of PHP 5.5.0). Note that this constant is designed to change over time as new and stronger algorithms are added to PHP. For that reason, the length of the result from using this identifier can change over time. Therefore, it is recommended to store the result in a database column that can expand beyond 60 characters (255 characters would be a good choice).</li>
<li><code class="docutils literal notranslate"><span class="pre">PASSWORD_BCRYPT</span></code>: Uses the CRYPT_BLOWFISH algorithm to create the hash. This will produce a standard crypt() compatible hash using the “2y2y” identifier. The result will always be a 60 character string, or false on failure.</li>
<li><code class="docutils literal notranslate"><span class="pre">PASSWORD_ARGON2I</span></code>: Uses the Argon2i hashing algorithm to create the hash. This algorithm is only available if PHP has been compiled with Argon2 support.</li>
<li><code class="docutils literal notranslate"><span class="pre">PASSWORD_ARGON2ID</span></code>: Uses the Argon2id hashing algorithm to create the hash. This algorithm is only available if PHP has been compiled with Argon2 support.</li>
</ul>
<p>Here’s an example of how to use <code class="docutils literal notranslate"><span class="pre">password_hash()</span></code>:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="x">$password = &quot;password123&quot;;</span>
<span class="x">$hash = password_hash($password, PASSWORD_DEFAULT);</span>
</pre></div>
</div>
<p>This code will generate a hash for <code class="docutils literal notranslate"><span class="pre">$password</span></code> using the default algorithm (<code class="docutils literal notranslate"><span class="pre">PASSWORD_DEFAULT</span></code>). The resulting hash can then be stored in a database for later use.</p>
<p>To verify a password, you can use the <code class="docutils literal notranslate"><span class="pre">password_verify()</span></code> function:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="x">$password = &quot;password123&quot;;</span>
<span class="x">$hash = password_hash($password, PASSWORD_DEFAULT);</span>

<span class="x">if (password_verify($password, $hash)) {</span>
<span class="x">    echo &quot;Password is valid!&quot;;</span>
<span class="x">} else {</span>
<span class="x">    echo &quot;Invalid password.&quot;;</span>
<span class="x">}</span>
</pre></div>
</div>
<p>This code will verify that <code class="docutils literal notranslate"><span class="pre">$password</span></code> matches the hash generated by <code class="docutils literal notranslate"><span class="pre">password_hash()</span></code>. If they match, it will output “Password is valid!”.</p>
<p>**Reference **</p>
<p><a class="reference external" href="https://www.php.net/manual/en/function.password-hash.php">https://www.php.net/manual/en/function.password-hash.php</a></p>
<p>(AICHJIM)</p>
<div class="section" id="how-password-salts-work">
<h3>How Password Salts Work<a class="headerlink" href="#how-password-salts-work" title="Permalink to this heading">¶</a></h3>
<p>Password salting is a technique used to protect passwords stored in databases. It involves adding a random string of characters, called a salt, to the password before it is hashed. This makes it much more difficult for attackers to crack the passwords, even if they have access to the database.</p>
<p>Here’s how password salting works:</p>
<ol class="arabic simple">
<li><strong>Salt generation:</strong> A unique salt is generated for each password. This salt is typically a random string of characters that is at least 32 bytes long.</li>
<li><strong>Salt concatenation:</strong> The salt is concatenated (joined) to the password. This creates a unique input for the hashing function.</li>
<li><strong>Hashing:</strong> The combined salt and password are passed through a cryptographic hash function. This produces a unique hash value for each password.</li>
<li><strong>Storage:</strong> The salt and hash value are stored together in the database. The original password is never stored.</li>
</ol>
<blockquote>
<div>When a user attempts to log in, the salt is retrieved from the database and concatenated to the password entered by the user. This combination is then hashed, and the resulting hash value is compared to the stored hash value. If the two hash values match, the user is authenticated.</div></blockquote>
<p>Salting provides several benefits for password security:</p>
<ol class="arabic simple">
<li><strong>Prevents Rainbow Table Attacks:</strong> Rainbow tables are precomputed tables of hash values for common passwords. Attackers can use these tables to quickly crack passwords that have not been salted. However, salting makes rainbow table attacks ineffective because the salt changes the hash value for each password.</li>
<li><strong>Protects against Duplicate Passwords:</strong> If two users have the same password, their hash values will be the same without salting. This makes it easier for attackers to identify common passwords. However, salting ensures that even if two users have the same password, their hash values will be different.</li>
<li><strong>Increases Password Complexity:</strong> Salting effectively increases the complexity of passwords, making them more difficult to crack. This is because the salt adds additional entropy to the password, making it more difficult to guess or brute-force.</li>
</ol>
<p>In summary, password salting is an essential security measure that helps protect passwords from being cracked. It is a simple but effective technique that should be used by all applications that store passwords.</p>
<p>(AIBJIM)</p>
</div>
<div class="section" id="one-way-hashing">
<h3>One Way Hashing<a class="headerlink" href="#one-way-hashing" title="Permalink to this heading">¶</a></h3>
<p>A one-way hashing algorithm, also known as a cryptographic hash function, is a mathematical function that takes an input of any length (a message or data) and produces a fixed-size output of random characters called a hash value or digest. The hash value is a unique representation of the input data, and it is practically impossible to reverse the process and obtain the original input from the hash value. This property makes one-way hashing algorithms crucial for data security and integrity verification.</p>
<p>Key characteristics of one-way hashing algorithms:</p>
<ol class="arabic simple">
<li><strong>Deterministic:</strong> The same input always produces the same hash value.</li>
<li><strong>Irreversibility:</strong> It is computationally infeasible to reverse the hash function and obtain the original input from the hash value.</li>
<li><strong>Collision Resistance:</strong> It is extremely difficult to find two different inputs that produce the same hash value.</li>
<li><strong>Efficiency:</strong> The hash function should be computationally efficient to calculate the hash value quickly.</li>
</ol>
<p>Applications of one-way hashing algorithms:</p>
<ol class="arabic simple">
<li><strong>Password Protection:</strong> Hashing is used to store passwords securely in databases. Instead of storing plain-text passwords, their hash values are stored, making it difficult for hackers to retrieve the original passwords even if they gain access to the database.</li>
<li><strong>Data Integrity:</strong> Hash values are used to verify the integrity of data. By comparing the hash value of the original data with the hash value of the received data, one can ensure that the data has not been tampered with during transmission or storage.</li>
<li><strong>Digital Signatures:</strong> Hash values are used in digital signatures to ensure the authenticity and non-repudiation of electronic documents.</li>
<li><strong>File Verification:</strong> Hash values are used to verify the integrity of downloaded files, ensuring that the downloaded file is identical to the original file.</li>
<li><strong>Blockchain Technology:</strong> Hashing is a fundamental component of blockchain technology, ensuring the immutability and security of the blockchain ledger.</li>
</ol>
<p>Examples of widely used one-way hashing algorithms include MD5, SHA-1, SHA-256, and SHA-512.</p>
<p>(AIBJIM)</p>
</div>
</div>
<div class="section" id="sql-script">
<h2>SQL Script<a class="headerlink" href="#sql-script" title="Permalink to this heading">¶</a></h2>
<p>The key thing to look at there is the UNIQUE attribute for the username.  Setting this to UNIQUE will cause the database to automatically check for duplicates.  If it finds one, you can always trap the error and code an appropriate response.</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="c1">-- SETUP DATABASE FOR FRESH INSTALL</span>
<span class="k">DROP</span><span class="w"> </span><span class="k">DATABASE</span><span class="w"> </span><span class="k">IF</span><span class="w"> </span><span class="k">EXISTS</span><span class="w"> </span><span class="n">wp_newuser_demo</span><span class="p">;</span>

<span class="k">CREATE</span><span class="w"> </span><span class="k">DATABASE</span><span class="w"> </span><span class="k">IF</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">EXISTS</span><span class="w"> </span><span class="n">wp_newuser_demo</span><span class="p">;</span>

<span class="n">USE</span><span class="w">  </span><span class="n">wp_newuser_demo</span><span class="p">;</span>

<span class="c1">-- ------------------------------------------</span>

<span class="c1">-- NOT IF YOU RUN THE CODE ABOVE, </span>
<span class="c1">-- THIS STEP IS NOT NECESSARY</span>
<span class="c1">-- THE CODE BELOW IF FOR REFFERENCE IF</span>
<span class="c1">-- YOU CHOOSE TO KEEP AN EXISTING VERSION</span>
<span class="c1">-- OF THE DATABASE</span>

<span class="k">DROP</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="k">IF</span><span class="w"> </span><span class="k">EXISTS</span><span class="w"> </span><span class="n">tbl_user</span><span class="p">;</span>

<span class="c1">-- ALTERNATIVE IF YOU HAVE A TABLE</span>
<span class="c1">-- BUT WISH TO REMOVE ALL THE DATA</span>
<span class="c1">-- UNCOMMENT THE FOLLOWING</span>

<span class="c1">-- TRUNCATE tbl_user;</span>

<span class="c1">-- ------------------------------------------</span>

<span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">tbl_user</span><span class="w"> </span>
<span class="w">    </span><span class="p">(</span><span class="n">firstname</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">50</span><span class="p">),</span>
<span class="w">    </span><span class="n">lastname</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">50</span><span class="p">),</span>
<span class="w">    </span><span class="n">username</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="w"> </span><span class="p">(</span><span class="mi">50</span><span class="p">)</span><span class="w"> </span><span class="k">UNIQUE</span><span class="p">,</span>
<span class="w">    </span><span class="n">password</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">255</span><span class="p">),</span>
<span class="w">    </span><span class="n">user_ID</span><span class="w">  </span><span class="nb">int</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span><span class="w">  </span><span class="n">AUTO_INCREMENT</span><span class="w"> </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="database-connection">
<h2>Database Connection<a class="headerlink" href="#database-connection" title="Permalink to this heading">¶</a></h2>
<p>Die() will cause the script to completely stop.</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>

<span class="c1">// dbconnect.php</span>
<span class="c1">//wp_newuser_demo</span>
<span class="c1">//tbl_user</span>

<span class="c1">// Turn off all error reporting</span>
<span class="nb">error_reporting</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>

<span class="k">try</span>
<span class="p">{</span>
	<span class="nv">$pdo</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PDO</span><span class="p">(</span><span class="s1">&#39;mysql:host=localhost;dbname=wp_newuser_demo&#39;</span><span class="p">,</span><span class="s1">&#39;root&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">);</span>
	<span class="nv">$pdo</span><span class="o">-&gt;</span><span class="na">setAttribute</span><span class="p">(</span><span class="nx">PDO</span><span class="o">::</span><span class="na">ATTR_ERRMODE</span><span class="p">,</span><span class="nx">PDO</span><span class="o">::</span><span class="na">ERRMODE_EXCEPTION</span><span class="p">);</span>

	<span class="c1">//only for educational use to demonstration connection status</span>
	<span class="nv">$dbstatus</span> <span class="o">=</span> <span class="s2">&quot;Good database connection&quot;</span><span class="p">;</span>

<span class="p">}</span>
<span class="k">catch</span><span class="p">(</span><span class="nx">PDOException</span> <span class="nv">$e</span><span class="p">)</span>
<span class="p">{</span>
	<span class="nv">$dbstatus</span> <span class="o">=</span> <span class="s2">&quot;Database connection failed&lt;br&gt;&quot;</span><span class="o">.</span>
			  <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span>

	<span class="k">die</span><span class="p">();</span>
<span class="p">}</span>

<span class="nx">SESSION_START</span><span class="p">();</span>

<span class="cp">?&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="start-page">
<h2>Start Page<a class="headerlink" href="#start-page" title="Permalink to this heading">¶</a></h2>
<p>A simple page demonstrating  new user and login options.</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="cm">&lt;!-- default.php --&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Home<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>Password Demo<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;NewUserRegistration.php&quot;</span><span class="p">&gt;</span>New User Registration<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;</span><span class="nt">br</span><span class="p">&gt;&lt;</span><span class="nt">br</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;login.php&quot;</span><span class="p">&gt;</span>Login<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;</span><span class="nt">br</span><span class="p">&gt;&lt;</span><span class="nt">br</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;memberpage.php&quot;</span><span class="p">&gt;</span>Member&#39;s Only<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;</span><span class="nt">br</span><span class="p">&gt;&lt;</span><span class="nt">br</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;logout.php&quot;</span><span class="p">&gt;</span>Logout<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;</span><span class="nt">br</span><span class="p">&gt;&lt;</span><span class="nt">br</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;test.php&quot;</span><span class="p">&gt;</span>testpage<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;</span><span class="nt">br</span><span class="p">&gt;&lt;</span><span class="nt">br</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="new-user-registration">
<h2>New User Registration<a class="headerlink" href="#new-user-registration" title="Permalink to this heading">¶</a></h2>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="c1">//NewUserRegistration.php</span>
<span class="k">require</span><span class="p">(</span><span class="s2">&quot;dbconnect.php&quot;</span><span class="p">);</span>

<span class="c1">// print_r($_POST);</span>
<span class="k">echo</span><span class="p">(</span><span class="s2">&quot;&lt;br&gt;&lt;br&gt;&quot;</span><span class="p">);</span>

<span class="k">if</span><span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;username&#39;</span><span class="p">]))</span>
<span class="p">{</span>
	<span class="k">try</span>
	<span class="p">{</span>

	<span class="nv">$pwd</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;password&#39;</span><span class="p">];</span>

	<span class="c1">//sql statement</span>
	<span class="nv">$sql_stmt</span> <span class="o">=</span> <span class="s2">&quot;INSERT INTO tbl_user&quot;</span>
			<span class="o">.</span> <span class="s2">&quot;(firstname, &quot;</span>
			<span class="o">.</span> <span class="s2">&quot;lastname, &quot;</span>
			<span class="o">.</span> <span class="s2">&quot;username, &quot;</span>
			<span class="o">.</span> <span class="s2">&quot;password) &quot;</span>
			<span class="o">.</span> <span class="s2">&quot;VALUES(&quot;</span>
			<span class="o">.</span> <span class="s2">&quot;:firstname, &quot;</span>
			<span class="o">.</span> <span class="s2">&quot;:lastname, &quot;</span>
			<span class="o">.</span> <span class="s2">&quot;:username, &quot;</span>
			<span class="o">.</span> <span class="s2">&quot;:password)&quot;</span><span class="p">;</span>

	<span class="c1">//prepare</span>
	<span class="nv">$sql_stmt</span> <span class="o">=</span> <span class="nv">$pdo</span><span class="o">-&gt;</span><span class="na">prepare</span><span class="p">(</span><span class="nv">$sql_stmt</span><span class="p">);</span>

	<span class="c1">//sanitize</span>
	<span class="nv">$firstname</span> <span class="o">=</span> <span class="nb">filter_var</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;firstname&#39;</span><span class="p">],</span> <span class="nx">FILTER_SANITIZE_STRING</span><span class="p">);</span>
	<span class="nv">$lastname</span> <span class="o">=</span> <span class="nb">filter_var</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;lastname&#39;</span><span class="p">],</span> <span class="nx">FILTER_SANITIZE_STRING</span><span class="p">);</span>
	<span class="nv">$username</span> <span class="o">=</span> <span class="nb">filter_var</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;username&#39;</span><span class="p">],</span> <span class="nx">FILTER_SANITIZE_STRING</span><span class="p">);</span>
	<span class="c1">//option to clean the password</span>

    <span class="c1">// ********   PASSWORD *******    </span>
	<span class="c1">//hash the password</span>
	<span class="nv">$password</span> <span class="o">=</span> <span class="nb">password_hash</span><span class="p">(</span><span class="nv">$pwd</span><span class="p">,</span> <span class="nx">PASSWORD_DEFAULT</span><span class="p">);</span>
    
    <span class="c1">// ***************************</span>
	
	<span class="c1">//bind param</span>
	<span class="nv">$sql_stmt</span><span class="o">-&gt;</span><span class="na">bindparam</span><span class="p">(</span><span class="s2">&quot;:firstname&quot;</span><span class="p">,</span><span class="nv">$firstname</span><span class="p">);</span>
	<span class="nv">$sql_stmt</span><span class="o">-&gt;</span><span class="na">bindparam</span><span class="p">(</span><span class="s2">&quot;:lastname&quot;</span><span class="p">,</span><span class="nv">$lastname</span><span class="p">);</span>
	<span class="nv">$sql_stmt</span><span class="o">-&gt;</span><span class="na">bindparam</span><span class="p">(</span><span class="s2">&quot;:username&quot;</span><span class="p">,</span><span class="nv">$username</span><span class="p">);</span>
	<span class="nv">$sql_stmt</span><span class="o">-&gt;</span><span class="na">bindparam</span><span class="p">(</span><span class="s2">&quot;:password&quot;</span><span class="p">,</span><span class="nv">$password</span><span class="p">);</span>

	<span class="c1">//execute</span>
	<span class="nv">$sql_stmt</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">();</span>
	<span class="k">echo</span><span class="p">(</span><span class="s1">&#39;&lt;p&gt;User was successfully entered&lt;/p&gt;&#39;</span><span class="p">);</span>

	<span class="p">}</span>
	<span class="k">catch</span><span class="p">(</span><span class="nx">PDOException</span> <span class="nv">$ee</span><span class="p">)</span>
	<span class="p">{</span>
	
		<span class="k">echo</span><span class="p">(</span><span class="nv">$ee</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">());</span>
		<span class="k">echo</span><span class="p">(</span><span class="s2">&quot;&lt;br&gt;&lt;br&gt;&quot;</span><span class="p">);</span>
		<span class="k">echo</span><span class="p">(</span><span class="nv">$ee</span><span class="o">-&gt;</span><span class="na">getCode</span><span class="p">());</span>
		
		<span class="k">if</span><span class="p">(</span><span class="nv">$ee</span><span class="o">-&gt;</span><span class="na">getCode</span><span class="p">()</span> <span class="o">==</span> <span class="mi">23000</span><span class="p">)</span>
		<span class="p">{</span>
			<span class="c1">//echo(&quot;Please select different username&quot;);</span>
			<span class="nv">$_SESSION</span><span class="p">[</span><span class="s1">&#39;logerr_message&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Please select different username&quot;</span><span class="p">;</span>
			<span class="nb">header</span><span class="p">(</span><span class="s1">&#39;location: NewUserRegistration.php&#39;</span><span class="p">);</span>			
        <span class="p">}</span>
	<span class="p">}</span>
<span class="p">}</span>
<span class="k">else</span>
<span class="p">{</span>
<span class="k">echo</span><span class="p">(</span><span class="s1">&#39;</span>
<span class="s1">      &lt;html&gt;</span>
<span class="s1">      &lt;head&gt;</span>
<span class="s1">      &lt;title&gt;New User&lt;/title&gt;</span>
<span class="s1">      &lt;/head&gt;</span>
<span class="s1">      &lt;body&gt;</span>
<span class="s1">      &#39;</span><span class="p">);</span>

    <span class="c1">// in this example the form is in a different file</span>
    <span class="c1">// the include here is showing an instance of how &#39;include&#39;</span>
    <span class="c1">// could be used in a website</span>
	<span class="k">include</span><span class="p">(</span><span class="s1">&#39;newuserform.php&#39;</span><span class="p">);</span>
<span class="k">echo</span><span class="p">(</span><span class="s1">&#39;</span>
<span class="s1">        &lt;/div&gt;</span>
<span class="s1">        &lt;/body&gt;</span>
<span class="s1">        &lt;/html&gt;        </span>
<span class="s1">        &#39;</span><span class="p">);</span>
<span class="p">}</span>
<span class="cp">?&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="form">
<h2>Form<a class="headerlink" href="#form" title="Permalink to this heading">¶</a></h2>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span>&lt;?php

	if(isset($_SESSION[&#39;logerr_message&#39;] ))
	{
		echo(&#39;Warning:&#39;.$_SESSION[&#39;logerr_message&#39;].&#39;&lt;br&gt;&lt;br&gt;&#39; );
		unset($_SESSION[&#39;logerr_message&#39;]);

	}
?&gt;
&lt;div&gt;
&lt;h1&gt;New User Registration&lt;/h&gt;
&lt;form method=&quot;POST&quot; action=&quot;NewUserRegistration.php&quot;&gt;
&lt;table border= &quot;1&quot;&gt;
	&lt;tr&gt;
		&lt;td colspan=&quot;2&quot;&gt;New User&lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt;First name&lt;/td&gt;
		&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;firstname&quot; size =&quot;25&quot; value=&quot;Joe&quot;&lt;/td&gt;
	&lt;/tr&gt;	
	&lt;tr&gt;
		&lt;td&gt;Last name&lt;/td&gt;
		&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;lastname&quot; size =&quot;25&quot; value=&quot;Smith&quot;&lt;/td&gt;
	&lt;/tr&gt;	
	&lt;tr&gt;
		&lt;td&gt;Username&lt;/td&gt;
		&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;username&quot; size =&quot;25&quot; 
                        value=&quot;jsmith&quot; require&lt;/td&gt;
	&lt;/tr&gt;	
	&lt;tr&gt;
		&lt;td&gt;Password&lt;/td&gt;
		&lt;td&gt;&lt;input type=&quot;password&quot; name=&quot;password&quot; size =&quot;25&quot; 
                        value=&quot;hotdog&quot; require&lt;/td&gt;
	&lt;/tr&gt;	
	&lt;tr&gt;
		&lt;td&gt;&lt;/td&gt;
		&lt;td&gt;&lt;input type=&quot;submit&quot; name=&quot;submit&quot; value=&quot;Enter&quot;&lt;/td&gt;
	&lt;/tr&gt;	
&lt;/table&gt;
&lt;/form&gt;
&lt;/div&gt;
</pre></div>
</div>
</div>
<div class="section" id="login-page">
<h2>Login Page<a class="headerlink" href="#login-page" title="Permalink to this heading">¶</a></h2>
<p>On this page, note the **error_reporting **  function.  Passing zero to it, will turn off error reporting.</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="c1">//--------------------</span>
<span class="c1">//login.php</span>
<span class="c1">//https://www.php.net/manual/en/function.error-reporting.php</span>

<span class="c1">// Turn off all error reporting</span>
<span class="nb">error_reporting</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>


<span class="k">require</span><span class="p">(</span><span class="s1">&#39;dbconnect.php&#39;</span><span class="p">);</span>

<span class="k">if</span><span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;username&#39;</span><span class="p">]))</span>
<span class="p">{</span>

		<span class="nv">$sql_login</span> <span class="o">=</span> 	<span class="s2">&quot;SELECT username, password &quot;</span><span class="o">.</span>
						<span class="s2">&quot;FROM tbl_user &quot;</span><span class="o">.</span>
						<span class="s2">&quot;WHERE username = :username&quot;</span><span class="p">;</span>

		<span class="c1">//prepare</span>
		<span class="nv">$sql_login</span> <span class="o">=</span> <span class="nv">$pdo</span><span class="o">-&gt;</span><span class="na">prepare</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">$sql_login</span><span class="s2">&quot;</span><span class="p">);</span>

		<span class="c1">//sanitize</span>
		<span class="nv">$username</span> <span class="o">=</span> <span class="nb">filter_var</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;username&#39;</span><span class="p">],</span> <span class="nx">FILTER_SANITIZE_STRING</span><span class="p">);</span>
		
		<span class="c1">//bind param</span>
		<span class="nv">$sql_login</span><span class="o">-&gt;</span><span class="na">bindParam</span><span class="p">(</span><span class="s2">&quot;:username&quot;</span><span class="p">,</span><span class="nv">$username</span><span class="p">);</span>

		<span class="c1">//execute</span>
		<span class="nv">$sql_login</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">();</span>

		<span class="c1">//get dataset / result</span>
		<span class="nv">$result</span> <span class="o">=</span> <span class="nv">$sql_login</span><span class="o">-&gt;</span><span class="na">fetch</span><span class="p">();</span>

		<span class="k">if</span><span class="p">(</span><span class="nv">$result</span><span class="p">[</span><span class="s1">&#39;password&#39;</span><span class="p">]</span><span class="o">==</span> <span class="k">null</span><span class="p">)</span>
		<span class="p">{</span>
			<span class="k">echo</span><span class="p">(</span><span class="s2">&quot;&lt;br&gt;Bad Username / or Password&lt;/br&gt;&quot;</span><span class="p">);</span>
		<span class="p">}</span>
		<span class="k">else</span>
		<span class="p">{</span>
			<span class="c1">//for your information - remove for production</span>
			<span class="nb">print_r</span><span class="p">(</span><span class="nv">$result</span><span class="p">[</span><span class="s1">&#39;password&#39;</span><span class="p">]);</span>
			<span class="k">echo</span><span class="p">(</span><span class="s1">&#39;&lt;br&gt;&lt;br&#39;</span><span class="p">);</span>
			
			<span class="c1">//store the password</span>
			<span class="nv">$hash_db</span> <span class="o">=</span> <span class="nv">$result</span><span class="p">[</span><span class="s1">&#39;password&#39;</span><span class="p">];</span>

			<span class="c1">//reverse the password process and compare</span>
			<span class="k">if</span><span class="p">(</span><span class="nb">password_verify</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;password&#39;</span><span class="p">],</span> <span class="nv">$hash_db</span><span class="p">))</span>
			<span class="p">{</span>
				<span class="k">echo</span><span class="p">(</span><span class="s1">&#39;&lt;br&gt;&lt;br&gt;Password is valid&#39;</span><span class="p">);</span>

				<span class="c1">//This session variable will set as a flag to</span>
				<span class="c1">// let users log onto &quot;Member / private&quot; pages</span>
				<span class="nv">$_SESSION</span><span class="p">[</span><span class="s1">&#39;LoginStatus&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span>

				<span class="c1">//Goto the members page</span>
				<span class="nb">header</span><span class="p">(</span><span class="s2">&quot;location: memberpage.php&quot;</span><span class="p">);</span>
			<span class="p">}</span>
			<span class="k">else</span>
			<span class="p">{</span>
				<span class="c1">//bad login</span>
				<span class="nv">$_SESSION</span><span class="p">[</span><span class="s1">&#39;LoginStatus&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="k">false</span><span class="p">;</span>
				
				<span class="c1">// Note: you could set a session variable</span>
				<span class="c1">// and go to a customized error page</span>
				<span class="k">echo</span><span class="p">(</span><span class="s1">&#39;&lt;br&gt;Invalid Password&lt;br&gt;&#39;</span><span class="p">);</span>
			<span class="p">}</span>
		<span class="p">}</span>
<span class="p">}</span>
<span class="cp">?&gt;</span>

<span class="x">&lt;html&gt;</span>
<span class="x">&lt;head&gt;</span>
<span class="x">&lt;title&gt;Login&lt;/title&gt;</span>
<span class="x">&lt;/head&gt;</span>
<span class="x">&lt;body&gt;</span>
<span class="x">&lt;form method=&quot;POST&quot; action=&quot;Login.php&quot;&gt;</span>
<span class="x">&lt;table border= &quot;1&quot;&gt;</span>
<span class="x">	&lt;tr&gt;</span>
<span class="x">		&lt;td colspan=&quot;2&quot;&gt;Login&lt;/td&gt;</span>
<span class="x">	&lt;/tr&gt;</span>
<span class="x">		&lt;td&gt;Username&lt;/td&gt;</span>
<span class="x">		&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;username&quot; size =&quot;25&quot; value=&quot;jsmith&quot; require&lt;/td&gt;</span>
<span class="x">	&lt;/tr&gt;	</span>
<span class="x">	&lt;tr&gt;</span>
<span class="x">		&lt;td&gt;Password&lt;/td&gt;</span>
<span class="x">		&lt;td&gt;&lt;input type=&quot;password&quot; name=&quot;password&quot; size =&quot;25&quot; value=&quot;hotdog&quot; require&lt;/td&gt;</span>
<span class="x">	&lt;/tr&gt;	</span>
<span class="x">	&lt;tr&gt;</span>
<span class="x">		&lt;td&gt;&lt;/td&gt;</span>
<span class="x">		&lt;td&gt;&lt;input type=&quot;submit&quot; name=&quot;submit&quot; value=&quot;Enter&quot;&lt;/td&gt;</span>
<span class="x">	&lt;/tr&gt;	</span>
<span class="x">&lt;/table&gt;</span>
<span class="x">&lt;/form&gt;</span>

<span class="x">&lt;a href=&quot;index.php&quot;&gt;Home&lt;/a&gt;</span>
<span class="x">&lt;/body&gt;</span>
<span class="x">&lt;/html&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="logout">
<h2>Logout<a class="headerlink" href="#logout" title="Permalink to this heading">¶</a></h2>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="c1">//logout.php</span>

<span class="c1">//Start Session</span>
<span class="nb">session_start</span><span class="p">();</span>

<span class="c1">// unset deletes the specified session variable</span>
<span class="nb">unset</span><span class="p">(</span><span class="nv">$_SESSION</span><span class="p">[</span><span class="s1">&#39;LoginStatus&#39;</span><span class="p">]);</span>

<span class="c1">//redirect too the home page</span>
<span class="nb">header</span><span class="p">(</span><span class="s1">&#39;location: index.php&#39;</span><span class="p">);</span>
<span class="cp">?&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="member-page">
<h2>Member Page<a class="headerlink" href="#member-page" title="Permalink to this heading">¶</a></h2>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="c1">//access the session variables</span>
<span class="nb">session_start</span><span class="p">();</span>
<span class="nb">print_r</span><span class="p">(</span><span class="nv">$_SESSION</span><span class="p">);</span>

<span class="c1">//*** Make sure to do this step</span>
<span class="c1">//*** It makes checks to see if the status flag is set to false to</span>
<span class="c1">//*** prevent unauthorised access to the page.</span>
<span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_SESSION</span><span class="p">[</span><span class="s1">&#39;LoginStatus&#39;</span><span class="p">])</span>  <span class="o">||</span> <span class="nv">$_SESSION</span><span class="p">[</span><span class="s1">&#39;LoginStatus&#39;</span><span class="p">]</span><span class="o">==</span> <span class="k">false</span><span class="p">)</span>
<span class="p">{</span>
	<span class="nb">header</span><span class="p">(</span><span class="s1">&#39;Location:index.php&#39;</span><span class="p">);</span>
<span class="p">}</span>
<span class="cp">?&gt;</span>
<span class="x">&lt;html&gt;</span>
<span class="x">&lt;head&gt;</span>
<span class="x">&lt;title&gt;Members&lt;/title&gt;</span>
<span class="x">&lt;/head&gt;</span>
<span class="x">&lt;body&gt;</span>
<span class="x">&lt;h1&gt;Members Only&lt;/h1&gt;</span>
<span class="x">&lt;p&gt;You are on the members only page.&lt;p&gt;</span>
<span class="x">&lt;p&gt;&lt;a href=&quot;index.php&quot;&gt;home&lt;/a&gt;</span>
<span class="x">&lt;/body&gt;</span>
<span class="x">&lt;/html&gt;</span>
</pre></div>
</div>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./wpref"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

          </div>
        </div>
      </div>
    </div>
  </div>
  <div id="footer-row" class="row">

    <div class="col-md-12">
        <span title="Built on 2023-11-10" class="pull-right">&copy; Copyright 2023 By James Goudy.
        Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.0.2 and the
        <a href="https://pypi.org/project/sphinx-sizzle-theme/"

           title="0.1.2/b995f3ff [2023-05-05T11:28:10]"

        >Sizzle</a> theme.</span>
    </div>

  </div>
</div>

<div id="tooltips" class="hidden">
</div>

<script>
$(document).ready(function() {
  'use strict';
  var $search = $('.search-query');

  var $filter = $('#toc-filter-query');
  var $toclist = $('.sidebar-toc > ul').find('li');

  if ($toclist.length === 0) {
    $toclist = $('.localtoc > ul').find('li');
  }


  var $nav = $('#nav');

  //$('#whole-page').removeClass('hidden');
  var nav_width = $nav.width();


  var search_url = '../search.html';

  function perform_search(e) {
    var $elem;

    if (e.type === 'keypress') {
      $elem = $(e.target);
    }
    else if (e.type === 'click') {
      $elem = $(e.target).parents('.input-group').find('input');
    }
    var q = $elem.val().trim();

    if (q) {
      var url = search_url + '?q=' + q + '&check_keywords=yes&area=default';

      location.href = url;
    }
  }


  function apply_filter() {
    var s = $filter.val().trim().toLowerCase();

    $toclist.find('a').removeClass('hidden');
    $toclist.each(function() {
      var $this = $(this);
      var $link = $this.find('> a');
      var t = $link.text().toLowerCase();
      var show = t.indexOf(s) >= 0;

      if (!show) {
        $link.addClass('hidden');
      }
    });
  }

  $filter.on('keyup', function(e) {
    apply_filter();
  });



  $search.on('keypress', function(e) {
    if (e.which == 13) {
      perform_search(e);
    }
  });
  $search.parents('.input-group').find('.input-group-addon').on('click', perform_search);
  $(document).on('click', '.summary .fa-caret-right', function(e) {
    var $elem = $(e.target).parents('li');
    var $next = $elem.next();
    $elem.addClass('hidden');
    $next.removeClass('hidden');
  });
  $(document).on('click', '.detail .fa-caret-down', function(e) {
    var $elem = $(e.target).parents('li');
    var $prev = $elem.prev();
    $elem.addClass('hidden');
    $prev.removeClass('hidden');
  });

  $('#content').on('click', function() {
    $('#mnav').hide();
  });

  var counter = 0;
  var timer = null;

  function show_nav() {
    $('#content').off('mousemove', track_mouse);
    if (timer !== null) {
      clearTimeout(timer);
      timer = null;
    }
    $nav.show();
  }

  function track_mouse(e) {
    var x = e.clientX;

    if (x < 15) {
      ++counter;
      if (timer === null) {
        timer = setTimeout(show_nav, 2000);
      }
    }
    else {
      counter = 0;
    }
    if (counter >= 20) {
      show_nav();
    }
  };

  function hide_nav() {
    $nav.hide();
    counter = 0;
    $('#content').on('mousemove', track_mouse);
  }

  $('.hidetoc').on('click', hide_nav);

  $(document).on('keyup', function(e) {
    if (e.ctrlKey) {
      if (e.which == 37) {      // Ctrl+left arrow
        hide_nav();
      }
      else if (e.which == 39) { // Ctrl+right arrow
        show_nav();
      }
    }
  });

  $('.menu-toggle').on('click', function(e) {
    $('#mnav').toggle();
  });

  function scroll_nav(frag) {
    var sel = '#nav ' + (frag ? 'a[href="' + frag + '"]' : '.toctree-l1 a.current');

    var $link = $(sel);

    if ($link.length > 0) {
      $link[0].scrollIntoView({block: 'center'});
    }
  }

  // If the navigator is long, then the item we clicked on to get here might
  // not be in view. Try to scroll it into the view - a slight delay is needed
  // to get it to sync properly with other stuff going on (as the page has just
  // loaded). Hence the setTimeout with a timeout of 0.

  function do_scroll() {
    scroll_nav(window.location.hash);
  }

  setTimeout(do_scroll, 0);

  function adjust_size() {
    // we need to set the height explicitly so that scrolling regions in the
    // content area work properly.
    var h = $('#page-content').height();

    $('#nav, #content').height(h);
    if ($('#nav').is(':visible')) {
      $('#mnav').hide();
    }
  }

  adjust_size();

  $(window).on('resize', adjust_size);

  function focus_content() {
    $('#content').focus();  // so that keyboard can be used to scroll, etc.
  }

  setTimeout(focus_content, 150);

  var sizzle = $(document).data('sizzle');

  function make_tooltip(id, h, b) {
    var $e = $('<div>').attr('id', id);
    var $b = $('<div>').addClass('tc-body').html(b);

    if (h) {
      var $h = $('<div>').addClass('tc-heading').html(h);
      $e.append($h);
    }
    $e.append($b);
    return $e;
  }

  var default_tt_options = {
    theme: ['tooltipster-light', 'tooltipster-light-customized'],
    interactive: true,
    maxWidth: 600,
    contentCloning: true
  };

  function activate_tooltips() {
    var $tt = $('.tt');

    //console.log('tt links:', $tt.length);
    $tt.tooltipster(default_tt_options);
  }



  function add_glossary_tooltips() {
    var links = $('a');  // can qualify with .reference.internal
    var glinks = {};
    var pat = /(.*)\.html#(term-.*)$/;
    var found = false;  // links in this document

    $.each(links, function(i, link) {
        var $link = $(link);
        var href = $link.attr('href');
        var m = href.match(pat);

        if (m) {
          var s = m[1].replace(/^(\.\.\/)+/, '');

          if (s === sizzle.app_data.glossary.document) {
            var k = m[2];

            if (k in glinks) {
              glinks[k].push($link);
            }
            else {
              glinks[k] = [$link];
            }
            found = true;
          }
        }
    });
    if (found) {
      var $t = $('#tooltips');
      var data = sizzle.app_data.glossary.terms;

      $.each(glinks, function(k, v) {
        var d = data[k];

        if (d) {  // as a sanity check
          var s = 'tc-'+ k;
          var $e = make_tooltip(s, d.term, d.defn);
          $t.append($e);

          $.each(v, function(i, link) {
            link.addClass('tt').attr('data-tooltip-content', '#' + s);
          });
        }
      });
    }
  }

  if (sizzle.app_data && sizzle.app_data.glossary &&
      sizzle.app_data.glossary.document) {
    add_glossary_tooltips();
  }




  function add_custom_tooltips() {
    if (!sizzle.app_data) {
      return;
    }

    var info_tips = sizzle.app_data.custom_data['info-tips'] || {};
    var hover_tips = sizzle.app_data.custom_data['hovers'] || {};

    if ($.isEmptyObject(info_tips) && $.isEmptyObject(hover_tips)) {
      return;
    }

    var tt_options = $.extend({contentAsHTML: true}, default_tt_options);

    if (!$.isEmptyObject(info_tips)) {
      $('.tc-info').each(function() {
        var $elem = $(this).prev();
        var classes = $elem.attr('class');
        var m = /\btci-([\S]+)/.exec(classes);

        if (m !== null) {
          var key = m[1];

          if (key in info_tips) {
            var v = info_tips[key];
            var tt = $elem.tooltipster(tt_options).tooltipster('content', v);
          }
        }
      });
    }
    if (!$.isEmptyObject(hover_tips)) {
      var current_origin, current_instance;

      var h_options = {
        functionBefore: function(instance, helper) {
          current_instance = instance;
          current_origin = helper.origin;
          //console.log('before', current_instance, current_origin);
        },
        functionAfter: function(instance, helper) {
          current_instance = null;
          current_origin = null;
          //console.log('after', current_instance, current_origin);
        }
      };

      var ht_options = $.extend(h_options, tt_options);
      $('.hover').each(function() {
        var $e = $(this);
        var ref = $e.data('hoverref');

        if (ref) {
          var tip = hover_tips[ref];

          if (tip) {
            $e.tooltipster(ht_options).tooltipster('content', tip);
            //if (/encrypt_and_sign/.test(ref)) { console.log(tip); }
          }
        }
      });
/*
      $(document).on('click', '.hovertip a.hoverlink', function(e) {
        if (!sizzle.app_data) {
          return;
        }
        var $this = $(this);
        var $content = $this.parent('.tooltipster-content');
        var ref = $this.data('href');
        var hover_tips = sizzle.app_data.custom_data['hovers'] || {};
        var tip = hover_tips[ref];

        if (tip && current_instance) {
          current_instance.content(tip);
        }

      });
 */
    }
  }

  add_custom_tooltips();

  setTimeout(activate_tooltips, 1000);


  // Clipboard copy for code blocks with captions

  $('.code-block-caption').each(function() {
    var $cap = $(this);
    var $btn = $('<span class="clip-copy"><span class="copied hidden">Copied!</span><i class="fa fa-clipboard" title="Copy contents"></i></span>');
    var $code = $cap.parent().find('.highlight');

    $cap.append($btn);
    $btn.find('.fa-clipboard').data('clip-text', $code.text());
  });

  var clipboard = new ClipboardJS('.code-block-caption .fa-clipboard', {
    'text': function(trigger) {
      return $(trigger).data('clip-text');
    }
  });

  clipboard.on('success', function(e) {
    var $copied = $(e.trigger).prev();

    $copied.removeClass('hidden');

    setTimeout(function() {$copied.addClass('hidden'); }, 1000);
  });

  if (sizzle.on_load) {
    sizzle.on_load.forEach(function(f) {
      f();
    });
  }
});
</script>
</body>
</html>