<!DOCTYPE html>
<html lang="en-gb">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">


<title>CSCI 210 - PDO Connections</title>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css" integrity="sha256-NuCn4IvuZXdBaFKJOAcsU2Q3ZpwbdFisd5dux4jkQ5w=" crossorigin="anonymous"/>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.4.1/dist/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.4.1/dist/css/bootstrap-theme.min.css" integrity="sha256-8uHMIn1ru0GS5KO+zf7Zccf8Uw12IA5DrdEcmMuWLFM=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tooltipster@4.2.8/dist/css/tooltipster.bundle.min.css" integrity="sha256-Qc4lCfqZWYaHF5hgEOFrYzSIX9Rrxk0NPHRac+08QeQ=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tooltipster@4.2.8/dist/css/plugins/tooltipster/sideTip/themes/tooltipster-sideTip-light.min.css" integrity="sha256-Wa1I4jhSXeWd3N6RhfPlkqr1WlT+zS3Vh2YGCg0129E=" crossorigin="anonymous">
<link href="https://fonts.googleapis.com/css?family=Open+Sans|Source+Code+Pro|Source+Sans+Pro|Source+Serif+Pro|Roboto|Roboto+Mono" rel="stylesheet">
<link href="https://fonts.red-dove.com/iosevka-ss09-regular/webfont.css" rel="stylesheet">

    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/css/sizzle.css" type="text/css" />
    <link rel="stylesheet" href="../_static/togglebutton.css" type="text/css" />
    <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />
    <link rel="stylesheet" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" type="text/css" />
    <link rel="stylesheet" href="../_static/sphinx-thebe.css" type="text/css" />
    <link rel="stylesheet" href="../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" type="text/css" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.1/jquery.min.js" integrity="sha512-aVKKRRi/Q/YV+4mjoKBsE4x3H+BkegoM/em46NNlCqNTmUYADjBbeNefNxYV7giUp0VxICtqdrbqU7iVaeZNXA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@3.4.1/dist/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.13.6/underscore-min.js" integrity="sha512-2V49R8ndaagCOnwmj8QnbT1Gz/rie17UouD9Re5WxbzRVUGoftCu5IuqqtAM9+UC3fwfHCSJR1hkzNQh/2wdtg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdn.jsdelivr.net/npm/tooltipster@4.2.8/dist/js/tooltipster.bundle.min.js" integrity="sha256-v8akIv8SCqn5f3mbVB7vEWprIizxPh6oV0yhao/dbB4=" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script>
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        LINK_SUFFIX: '.html',
        HAS_SOURCE:  false,
        SOURCELINK_SUFFIX: ''
      };
      $(document).data('sizzle', {on_load: []});
    </script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <script src="../app-data.js"></script>
<link rel="index" title="Index" href="../genindex.html" />
<link rel="search" title="Search" href="../search.html" />
<link rel="next" title="PDO - First Data Insert - Car Example" href="FirstDataDBInsertCarExample.html" />
<link rel="prev" title="Session Variable Homework Assignment Hint" href="SessionHomeworkHint.html" />

</head>
<body class="full-height test">
<noscript>
  <div>
    <div id="noscript-message">JavaScript is not enabled. It is needed for this website to work.</div>
  </div>
</noscript>
<div id="whole-page" class="container-fluid content full-height">
  <div id="header-row" class="row">
    <div id="header-container" class="col-md-12">
      <div id="hdr-left">
        <i class="fa fa-bars menu-toggle"></i>
        
<a href="../index.html" class="text-logo">Web Programming</a>

      </div>
      <div id="hdr-centre" class="text-center stretch">
        <h3 title="PDO Connections">PDO Connections</h3>
        <h6>PDO Connections</h6>
      </div>
      <div id="hdr-search">
        
<div class="input-group" title="Enter something to search for and then either press Enter or click the magnifying glass">
  <input type="text" class="form-control search-query" placeholder="Search docs ...">
  <div class="input-group-addon">
    <i class="fa fa-search"></i>
  </div>
</div>
      </div>

      <div id="hdr-index">
        <a href="../genindex.html" class="btn btn-default" title="Go to the index"><i class="fa fa-list"></i></a>
      </div>

      <div id="hdr-source">
        <a href="../_sources/wpref/PDOConnections.md" class="btn btn-default" title="See the source for this page"><i class="fa fa-code"></i></a>
      </div>

      <div id="hdr-right">
        
  
  <div class="prev-next">
    
      <div class="pull-left">
        <a class="btn btn-default prev" href="SessionHomeworkHint.html" title="Previous chapter (Session Variable Homework Assignment Hint)"><i class="fa fa-chevron-left mr-1em" aria-hidden="true"></i><span class="btn-text">Session Variable Homework Assignment Hint</span></a>
      </div>
    
      <div class="pull-right">
        <a class="btn btn-default next" href="FirstDataDBInsertCarExample.html" title="Next chapter (PDO - First Data Insert - Car Example)"><span class="btn-text">PDO - First Data Insert - Car Example</span>&nbsp;<i class="fa fa-chevron-right ml-1em" aria-hidden="true"></i></a>
      </div>
    </div>
  
      </div>
      <div id="alt-hdr-right">

        <a href="SessionHomeworkHint.html"><i class="fa fa-chevron-left mr-8"></i></a>


        <a href="../index.html"><i class="fa fa-home mr-8"></i></a>


        <a href="../search.html"><i class="fa fa-search mr-8"></i></a>


        <a href="../genindex.html"><i class="fa fa-list mr-8"></i></a>


        <a href="FirstDataDBInsertCarExample.html"><i class="fa fa-chevron-right"></i></a>

      </div>
    </div>
  </div>

  <div id="content-row" class="row">
    <div id="page-content" class="col-md-12 flex-col">
      <div id="content-container">
        <div id="nav">
          
  <div class="navsidebar">
    <div id="sidebar-search">
      
<div class="input-group" title="Enter something to search for and then either press Enter or click the magnifying glass">
  <input type="text" class="form-control search-query" placeholder="Search docs ...">
  <div class="input-group-addon">
    <i class="fa fa-search"></i>
  </div>
</div>
    </div>
      <div class="sidebar-block">
        <div class="sidebar-tocheading">
          <div class="pull-left">
            <h2>Table Of Contents</h2>
          </div>
          <div class="pull-right" title="Hide this sidebar (hover at left edge to bring it back)"><i class="fa fa-chevron-left hidetoc"></i></div>
        </div>
        <div class="sidebar-toc">
      
          <div id="toc-filter" title="Type in here to show only matching topics">
            <input class="form-control" id="toc-filter-query" placeholder="Filter by title ...">
          </div>
      
        
  
    <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="PHPIntroduction.html">PHP Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="PHPBasics.html">PHP Basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="phparrays.html">PHP Arrays</a></li>
<li class="toctree-l1"><a class="reference internal" href="FirstFormsPOSTandGET.html">First Forms - POST and GET</a></li>
<li class="toctree-l1"><a class="reference internal" href="HTMLInputFieldReview.html">HTML Input Field Review</a></li>
<li class="toctree-l1"><a class="reference internal" href="SessionVariables.html">Session Variables</a><ul>
<li class="toctree-l2"><a class="reference internal" href="SessionHomeworkHint.html">Session Variable Homework Assignment Hint</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#pdo-connections">PDO Connections</a><ul>
<li class="toctree-l2"><a class="reference internal" href="FirstDataDBInsertCarExample.html">PDO - First Data Insert - Car Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="PDONoPlaceHoldersExample.html">PDO With No Named Placeholders</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="AddEditDelete.html">Add Edit Delete</a></li>
</ul>

  
        </div>
      </div>
  </div>
        </div>
        <div id="content" tabindex="0" class="stretch">
          <div id="mnav">
            
  
    <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="PHPIntroduction.html">PHP Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="PHPBasics.html">PHP Basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="phparrays.html">PHP Arrays</a></li>
<li class="toctree-l1"><a class="reference internal" href="FirstFormsPOSTandGET.html">First Forms - POST and GET</a></li>
<li class="toctree-l1"><a class="reference internal" href="HTMLInputFieldReview.html">HTML Input Field Review</a></li>
<li class="toctree-l1"><a class="reference internal" href="SessionVariables.html">Session Variables</a><ul>
<li class="toctree-l2"><a class="reference internal" href="SessionHomeworkHint.html">Session Variable Homework Assignment Hint</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#pdo-connections">PDO Connections</a><ul>
<li class="toctree-l2"><a class="reference internal" href="FirstDataDBInsertCarExample.html">PDO - First Data Insert - Car Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="PDONoPlaceHoldersExample.html">PDO With No Named Placeholders</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="AddEditDelete.html">Add Edit Delete</a></li>
</ul>

  
          </div>
          <div class="body">
            
  <div class="tex2jax_ignore mathjax_ignore section" id="pdo-connections">
<h1>PDO Connections<a class="headerlink" href="#pdo-connections" title="Permalink to this heading">¶</a></h1>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this heading">¶</a></h2>
<blockquote>
<div><p>The PHP Data Objects (PDO) extension defines a lightweight, consistent interface for accessing databases in PHP. Each database driver that implements the PDO interface can expose database-specific features as regular extension functions. Note that you cannot perform any database functions using the PDO extension by itself; you must use a database-specific PDO driver to access a database server.</p>
<p><em>PDO provides a data-access abstraction layer, which means that, regardless of which database you’re using, you use the same functions to issue queries and fetch data.</em> PDO does not provide a database abstraction; it doesn’t rewrite SQL or emulate missing features. You should use a full-blown abstraction layer if you need that facility.</p>
<p>PDO ships with PHP.  <a class="reference external" href="https://www.php.net/manual/en/intro.pdo.php">php introduction 10/2023</a></p>
</div></blockquote>
</div>
<div class="section" id="database-connections">
<h2>Database Connections<a class="headerlink" href="#database-connections" title="Permalink to this heading">¶</a></h2>
<p>Connection strings do the following:</p>
<ul class="simple">
<li>identify what type of database they are connecting to</li>
<li>where the database/host is located on the web</li>
<li>the database name</li>
<li>username with the appropriate privileges<ul>
<li>NOTE: when going to production, <strong>No username facing the public internet should have admin rights!</strong></li>
</ul>
</li>
<li>password for the username</li>
</ul>
<blockquote>
<div><strong>NONE OF THE EXAMPLES INCLUDE SANITIZING THE DATA.  IN PRODUCTION, ALWAYS SANITIZE AND VALIDATE THE DATA BEFORE INSERTING IT INTO A DATABASE!</strong></div></blockquote>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="x">try {</span>

<span class="x"> // MSSQL Server, Sybase, and Oracle</span>

<span class="x"> $pdo = new PDO(&quot;sqlsrv:host=$host;dbname=$dbname, $user, $password&quot;);</span>
<span class="x"> $pdo = new PDO(&quot;sybase:host=$host;dbname=$dbname, $user, $password&quot;);</span>
<span class="x"> $pdo = new PDO(&quot;oci:host=$host;dbname=$dbname, $user, $password&quot;);</span>
<span class="x"> </span>
<span class="x"> // MySQL with PDO_MYSQL</span>
<span class="x"> $pdo = new PDO(&quot;mysql:host=$host;dbname=$dbname&quot;, $user, $password);</span>

<span class="x"> // SQLite Database</span>
<span class="x"> $pdo = new PDO(&quot;sqlite:my/database/path/database.db&quot;);</span>
<span class="x">    </span>
<span class="x"> // ODBC</span>
<span class="x"> $pdo = new PDO(&quot;odbc:host=$host;dbname=$dbname&quot;, $user, $password);</span>
<span class="x">}</span>

<span class="x">catch(PDOException $e) {</span>

<span class="x">  echo $e-&gt;getMessage();</span>

<span class="x">}</span>
</pre></div>
</div>
</div>
<div class="section" id="pdo-drivers">
<h2>PDO Drivers<a class="headerlink" href="#pdo-drivers" title="Permalink to this heading">¶</a></h2>
<ul class="contains-task-list simple">
<li class="task-list-item"><input class="task-list-item-checkbox" disabled="disabled" type="checkbox"> | Driver name  | Supported databases                                          |
| :———– | :———————————————————– |
| PDO_CUBRID   | Cubrid                                                       |
| PDO_DBLIB    | FreeTDS / Microsoft SQL Server / Sybase                      |
| PDO_FIREBIRD | Firebird                                                     |
| PDO_IBM      | IBM DB2                                                      |
| PDO_INFORMIX | IBM Informix Dynamic Server                                  |
| PDO_MYSQL    | MySQL 3.x/4.x/5.x/8.x                                        |
| PDO_OCI      | Oracle Call Interface                                        |
| PDO_ODBC     | ODBC v3 (IBM DB2, unixODBC and win32 ODBC)                   |
| PDO_PGSQL    | PostgreSQL                                                   |
| PDO_SQLITE   | SQLite 3 and SQLite 2                                        |
| PDO_SQLSRV   | Microsoft SQL Server / SQL Azure                             |
|              | From <a class="reference external" href="https://www.php.net/manual/en/pdo.drivers.php">php.org</a> |</li>
</ul>
</div>
<div class="section" id="close-connection">
<h2>Close Connection<a class="headerlink" href="#close-connection" title="Permalink to this heading">¶</a></h2>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="x">// close the connection</span>

<span class="x">$pdo = null;</span>
</pre></div>
</div>
</div>
<div class="section" id="error-modes">
<h2>Error Modes<a class="headerlink" href="#error-modes" title="Permalink to this heading">¶</a></h2>
<p>PDO::ERRMODE_SILENT</p>
<p>This is the default error mode. It does not show any error exceptions</p>
<p>PDO::ERRMODE_WARNING</p>
<p>This mode will issue a standard PHP warning, and allow the program to continue execution. It’s useful for debugging.</p>
<p>PDO::ERRMODE_EXCEPTION</p>
<p>This is the mode you should want in most situations. It fires an exception, allowing you to handle errors gracefully and hide data that might help someone exploit your system. Here’s an example of taking advantage of exceptions:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="x">$pdo-&gt;setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_SILENT );</span>

<span class="x">$pdo-&gt;setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_WARNING );</span>

<span class="x">$pdo-&gt;setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION );</span>
</pre></div>
</div>
</div>
<div class="section" id="insert-update">
<h2>Insert / Update<a class="headerlink" href="#insert-update" title="Permalink to this heading">¶</a></h2>
<p>Prepare -&gt; Sanitize -&gt; Bind <em>-&gt;</em> Execute</p>
</div>
<div class="section" id="prepared-statements">
<h2>Prepared Statements<a class="headerlink" href="#prepared-statements" title="Permalink to this heading">¶</a></h2>
<p>A prepared statement is a precompiled SQL statement that can be executed multiple times by sending just the data to the server. It has the added advantage of automatically making the <strong>data used in the placeholders safe from SQL injection attacks</strong>.</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="x">$pdo= $pdo-&gt;prepare(&quot;INSERT INTO tbl_names(first_name,last_name) VALUES(:first_name,:last_name )&quot;);</span>

<span class="x">$pdo-&gt;execute();</span>
</pre></div>
</div>
<div class="section" id="placeholders">
<h3>Placeholders<a class="headerlink" href="#placeholders" title="Permalink to this heading">¶</a></h3>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="x">// no placeholders - ripe for SQL Injection!</span>

<span class="x">$STH = $pdo-&gt;prepare(&quot;INSERT INTO folks (name, addr, city) values ($name, $addr, $city)&quot;);</span>

<span class="x"> </span>

<span class="x">// unnamed placeholders</span>

<span class="x">$STH = $pdo-&gt;prepare(&quot;INSERT INTO folks (name, addr, city) values (?, ?, ?);</span>

<span class="x"> </span>

<span class="x">// named placeholders</span>

<span class="x">$STH = $pdo-&gt;prepare(&quot;INSERT INTO folks (name, addr, city) value (:name, :addr, :city)&quot;);</span>
</pre></div>
</div>
</div>
<div class="section" id="unnamed-place-holders">
<h3>Unnamed Place Holders<a class="headerlink" href="#unnamed-place-holders" title="Permalink to this heading">¶</a></h3>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="x">// unnamed placeholders</span>

<span class="x">$STH = $pdo-&gt;(&quot;INSERT INTO folks (name, addr, city) values (?, ?, ?);</span>

<span class="x">// assign variables to each place holder, indexed 1-3</span>

<span class="x">$STH-&gt;bindParam(1, $name);</span>

<span class="x">$STH-&gt;bindParam(2, $addr);</span>

<span class="x">$STH-&gt;bindParam(3, $city);</span>

<span class="x"> </span>

<span class="x">// insert one row</span>

<span class="x">$name = &quot;Moe&quot;</span>

<span class="x">$addr = &quot;1 Wicked Way&quot;;</span>

<span class="x">$city = &quot;Arlington Heights&quot;;</span>

<span class="x">$STH-&gt;execute();</span>

<span class="x"> </span>

<span class="x">// insert another row with different values</span>

<span class="x">$name = &quot;Curly&quot;</span>

<span class="x">$addr = &quot;Schmuck Drive&quot;;</span>

<span class="x">$city = &quot;Schaumburg&quot;;</span>

<span class="x">$STH-&gt;execute();</span>
</pre></div>
</div>
</div>
<div class="section" id="use-an-array">
<h3>Use an array<a class="headerlink" href="#use-an-array" title="Permalink to this heading">¶</a></h3>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="x">// the data we want to insert</span>

<span class="x">$data = array(&#39;Cathy&#39;, &#39;9 Dark and Twisty Road&#39;, &#39;Cardiff&#39;);</span>

<span class="x">$STH = $pdo-&gt;prepare(&quot;INSERT INTO folks (name, addr, city) values (?, ?, ?);</span>

<span class="x">$STH-&gt;execute($data);</span>
</pre></div>
</div>
</div>
<div class="section" id="named-place-holders">
<h3>Named Place Holders<a class="headerlink" href="#named-place-holders" title="Permalink to this heading">¶</a></h3>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="x">// the first argument is the named placeholder name - notice named</span>

<span class="x">// placeholders always start with a colon.</span>

<span class="x">$pdo-&gt;bindParam(&#39;:name&#39;, $name);</span>


<span class="x">// the data we want to insert</span>
<span class="x">$data = array( &#39;name&#39; =&gt; &#39;Cathy&#39;, &#39;addr&#39; =&gt; &#39;9 Dark and Twisty&#39;, &#39;city&#39; =&gt; &#39;Cardiff&#39; );</span>


<span class="x">// the shortcut!</span>

<span class="x">$pdo = $pdo-&gt;(&quot;INSERT INTO folks (name, addr, city) value (:name, :addr, :city)&quot;);</span>

<span class="x">$STH-&gt;execute($data);</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="fetching-data">
<h2>Fetching Data<a class="headerlink" href="#fetching-data" title="Permalink to this heading">¶</a></h2>
<p>PDO::FETCH_ASSOC: returns an array indexed by column name</p>
<p>PDO::FETCH_BOTH (default): returns an array indexed by both column name and number</p>
<p>PDO::FETCH_BOUND: Assigns the values of your columns to the variables set with the -&gt;bindColumn() method</p>
<p>PDO::FETCH_CLASS: Assigns the values of your columns to properties of the named class. It will create the properties if matching properties do not exist</p>
<p>PDO::FETCH_INTO: Updates an existing instance of the named class</p>
<p>PDO::FETCH_LAZY: Combines PDO::FETCH_BOTH/PDO::FETCH_OBJ, creating the object variable names as they are used</p>
<p>PDO::FETCH_NUM: returns an array indexed by column number</p>
<p>PDO::FETCH_OBJ: returns an anonymous object with property names that correspond to the column names</p>
<div class="section" id="fetch-assoc">
<h3>FETCH_ASSOC<a class="headerlink" href="#fetch-assoc" title="Permalink to this heading">¶</a></h3>
<p>This fetch type creates an associative array, indexed by column name</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="x">// using the shortcut -&gt;query() method here since there are no variable</span>

<span class="x">// values in the select statement.</span>
<span class="x">$STH = $pdo-&gt;query(&#39;SELECT name, addr, city from folks&#39;);</span>

<span class="x">// setting the fetch mode</span>
<span class="x">$STH-&gt;setFetchMode(PDO::FETCH_ASSOC);</span>

<span class="x">while($row = $STH-&gt;fetch()) {</span>

<span class="x">  echo $row[&#39;name&#39;] . &quot;\n&quot;;</span>

<span class="x">  echo $row[&#39;addr&#39;] . &quot;\n&quot;;</span>

<span class="x">  echo $row[&#39;city&#39;] . &quot;\n&quot;;</span>

<span class="x">}</span>
</pre></div>
</div>
</div>
<div class="section" id="fetch-obj">
<h3>FETCH_OBJ<a class="headerlink" href="#fetch-obj" title="Permalink to this heading">¶</a></h3>
<p>This fetch type creates an object of std class for each row of fetched data. Here’s an example:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="x">// creating the statement</span>
<span class="x">$STH = $DBH-&gt;query(&#39;SELECT name, addr, city from folks&#39;);</span>

<span class="x"> </span>
<span class="x">// setting the fetch mode</span>
<span class="x">$STH-&gt;setFetchMode(PDO::FETCH_OBJ);</span>

<span class="x">// showing the results</span>
<span class="x">while($row = $STH-&gt;fetch()) {</span>

<span class="x">  echo $row-&gt;name . &quot;\n&quot;;</span>

<span class="x">  echo $row-&gt;addr . &quot;\n&quot;;</span>

<span class="x">  echo $row-&gt;city . &quot;\n&quot;;</span>

<span class="x">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="last-insert-id">
<h2>Last Insert ID<a class="headerlink" href="#last-insert-id" title="Permalink to this heading">¶</a></h2>
<p>The -&gt;lastInsertId() method is always called on the database handle, not the statement handle, and will return the auto-incremented id of the last inserted row by that connection.</p>
</div>
<div class="section" id="delete-files">
<h2>Delete Files<a class="headerlink" href="#delete-files" title="Permalink to this heading">¶</a></h2>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="x">$pdo-&gt;exec(&#39;DELETE FROM folks WHERE 1&#39;);</span>
</pre></div>
</div>
</div>
<div class="toctree-wrapper compound">
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./wpref"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

          </div>
        </div>
      </div>
    </div>
  </div>
  <div id="footer-row" class="row">

    <div class="col-md-12">
        <span title="Built on 2023-10-11" class="pull-right">&copy; Copyright 2023 By James Goudy.
        Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.0.2 and the
        <a href="https://pypi.org/project/sphinx-sizzle-theme/"

           title="0.1.2/b995f3ff [2023-05-05T11:28:10]"

        >Sizzle</a> theme.</span>
    </div>

  </div>
</div>

<div id="tooltips" class="hidden">
</div>

<script>
$(document).ready(function() {
  'use strict';
  var $search = $('.search-query');

  var $filter = $('#toc-filter-query');
  var $toclist = $('.sidebar-toc > ul').find('li');

  if ($toclist.length === 0) {
    $toclist = $('.localtoc > ul').find('li');
  }


  var $nav = $('#nav');

  //$('#whole-page').removeClass('hidden');
  var nav_width = $nav.width();


  var search_url = '../search.html';

  function perform_search(e) {
    var $elem;

    if (e.type === 'keypress') {
      $elem = $(e.target);
    }
    else if (e.type === 'click') {
      $elem = $(e.target).parents('.input-group').find('input');
    }
    var q = $elem.val().trim();

    if (q) {
      var url = search_url + '?q=' + q + '&check_keywords=yes&area=default';

      location.href = url;
    }
  }


  function apply_filter() {
    var s = $filter.val().trim().toLowerCase();

    $toclist.find('a').removeClass('hidden');
    $toclist.each(function() {
      var $this = $(this);
      var $link = $this.find('> a');
      var t = $link.text().toLowerCase();
      var show = t.indexOf(s) >= 0;

      if (!show) {
        $link.addClass('hidden');
      }
    });
  }

  $filter.on('keyup', function(e) {
    apply_filter();
  });



  $search.on('keypress', function(e) {
    if (e.which == 13) {
      perform_search(e);
    }
  });
  $search.parents('.input-group').find('.input-group-addon').on('click', perform_search);
  $(document).on('click', '.summary .fa-caret-right', function(e) {
    var $elem = $(e.target).parents('li');
    var $next = $elem.next();
    $elem.addClass('hidden');
    $next.removeClass('hidden');
  });
  $(document).on('click', '.detail .fa-caret-down', function(e) {
    var $elem = $(e.target).parents('li');
    var $prev = $elem.prev();
    $elem.addClass('hidden');
    $prev.removeClass('hidden');
  });

  $('#content').on('click', function() {
    $('#mnav').hide();
  });

  var counter = 0;
  var timer = null;

  function show_nav() {
    $('#content').off('mousemove', track_mouse);
    if (timer !== null) {
      clearTimeout(timer);
      timer = null;
    }
    $nav.show();
  }

  function track_mouse(e) {
    var x = e.clientX;

    if (x < 15) {
      ++counter;
      if (timer === null) {
        timer = setTimeout(show_nav, 2000);
      }
    }
    else {
      counter = 0;
    }
    if (counter >= 20) {
      show_nav();
    }
  };

  function hide_nav() {
    $nav.hide();
    counter = 0;
    $('#content').on('mousemove', track_mouse);
  }

  $('.hidetoc').on('click', hide_nav);

  $(document).on('keyup', function(e) {
    if (e.ctrlKey) {
      if (e.which == 37) {      // Ctrl+left arrow
        hide_nav();
      }
      else if (e.which == 39) { // Ctrl+right arrow
        show_nav();
      }
    }
  });

  $('.menu-toggle').on('click', function(e) {
    $('#mnav').toggle();
  });

  function scroll_nav(frag) {
    var sel = '#nav ' + (frag ? 'a[href="' + frag + '"]' : '.toctree-l1 a.current');

    var $link = $(sel);

    if ($link.length > 0) {
      $link[0].scrollIntoView({block: 'center'});
    }
  }

  // If the navigator is long, then the item we clicked on to get here might
  // not be in view. Try to scroll it into the view - a slight delay is needed
  // to get it to sync properly with other stuff going on (as the page has just
  // loaded). Hence the setTimeout with a timeout of 0.

  function do_scroll() {
    scroll_nav(window.location.hash);
  }

  setTimeout(do_scroll, 0);

  function adjust_size() {
    // we need to set the height explicitly so that scrolling regions in the
    // content area work properly.
    var h = $('#page-content').height();

    $('#nav, #content').height(h);
    if ($('#nav').is(':visible')) {
      $('#mnav').hide();
    }
  }

  adjust_size();

  $(window).on('resize', adjust_size);

  function focus_content() {
    $('#content').focus();  // so that keyboard can be used to scroll, etc.
  }

  setTimeout(focus_content, 150);

  var sizzle = $(document).data('sizzle');

  function make_tooltip(id, h, b) {
    var $e = $('<div>').attr('id', id);
    var $b = $('<div>').addClass('tc-body').html(b);

    if (h) {
      var $h = $('<div>').addClass('tc-heading').html(h);
      $e.append($h);
    }
    $e.append($b);
    return $e;
  }

  var default_tt_options = {
    theme: ['tooltipster-light', 'tooltipster-light-customized'],
    interactive: true,
    maxWidth: 600,
    contentCloning: true
  };

  function activate_tooltips() {
    var $tt = $('.tt');

    //console.log('tt links:', $tt.length);
    $tt.tooltipster(default_tt_options);
  }



  function add_glossary_tooltips() {
    var links = $('a');  // can qualify with .reference.internal
    var glinks = {};
    var pat = /(.*)\.html#(term-.*)$/;
    var found = false;  // links in this document

    $.each(links, function(i, link) {
        var $link = $(link);
        var href = $link.attr('href');
        var m = href.match(pat);

        if (m) {
          var s = m[1].replace(/^(\.\.\/)+/, '');

          if (s === sizzle.app_data.glossary.document) {
            var k = m[2];

            if (k in glinks) {
              glinks[k].push($link);
            }
            else {
              glinks[k] = [$link];
            }
            found = true;
          }
        }
    });
    if (found) {
      var $t = $('#tooltips');
      var data = sizzle.app_data.glossary.terms;

      $.each(glinks, function(k, v) {
        var d = data[k];

        if (d) {  // as a sanity check
          var s = 'tc-'+ k;
          var $e = make_tooltip(s, d.term, d.defn);
          $t.append($e);

          $.each(v, function(i, link) {
            link.addClass('tt').attr('data-tooltip-content', '#' + s);
          });
        }
      });
    }
  }

  if (sizzle.app_data && sizzle.app_data.glossary &&
      sizzle.app_data.glossary.document) {
    add_glossary_tooltips();
  }




  function add_custom_tooltips() {
    if (!sizzle.app_data) {
      return;
    }

    var info_tips = sizzle.app_data.custom_data['info-tips'] || {};
    var hover_tips = sizzle.app_data.custom_data['hovers'] || {};

    if ($.isEmptyObject(info_tips) && $.isEmptyObject(hover_tips)) {
      return;
    }

    var tt_options = $.extend({contentAsHTML: true}, default_tt_options);

    if (!$.isEmptyObject(info_tips)) {
      $('.tc-info').each(function() {
        var $elem = $(this).prev();
        var classes = $elem.attr('class');
        var m = /\btci-([\S]+)/.exec(classes);

        if (m !== null) {
          var key = m[1];

          if (key in info_tips) {
            var v = info_tips[key];
            var tt = $elem.tooltipster(tt_options).tooltipster('content', v);
          }
        }
      });
    }
    if (!$.isEmptyObject(hover_tips)) {
      var current_origin, current_instance;

      var h_options = {
        functionBefore: function(instance, helper) {
          current_instance = instance;
          current_origin = helper.origin;
          //console.log('before', current_instance, current_origin);
        },
        functionAfter: function(instance, helper) {
          current_instance = null;
          current_origin = null;
          //console.log('after', current_instance, current_origin);
        }
      };

      var ht_options = $.extend(h_options, tt_options);
      $('.hover').each(function() {
        var $e = $(this);
        var ref = $e.data('hoverref');

        if (ref) {
          var tip = hover_tips[ref];

          if (tip) {
            $e.tooltipster(ht_options).tooltipster('content', tip);
            //if (/encrypt_and_sign/.test(ref)) { console.log(tip); }
          }
        }
      });
/*
      $(document).on('click', '.hovertip a.hoverlink', function(e) {
        if (!sizzle.app_data) {
          return;
        }
        var $this = $(this);
        var $content = $this.parent('.tooltipster-content');
        var ref = $this.data('href');
        var hover_tips = sizzle.app_data.custom_data['hovers'] || {};
        var tip = hover_tips[ref];

        if (tip && current_instance) {
          current_instance.content(tip);
        }

      });
 */
    }
  }

  add_custom_tooltips();

  setTimeout(activate_tooltips, 1000);


  // Clipboard copy for code blocks with captions

  $('.code-block-caption').each(function() {
    var $cap = $(this);
    var $btn = $('<span class="clip-copy"><span class="copied hidden">Copied!</span><i class="fa fa-clipboard" title="Copy contents"></i></span>');
    var $code = $cap.parent().find('.highlight');

    $cap.append($btn);
    $btn.find('.fa-clipboard').data('clip-text', $code.text());
  });

  var clipboard = new ClipboardJS('.code-block-caption .fa-clipboard', {
    'text': function(trigger) {
      return $(trigger).data('clip-text');
    }
  });

  clipboard.on('success', function(e) {
    var $copied = $(e.trigger).prev();

    $copied.removeClass('hidden');

    setTimeout(function() {$copied.addClass('hidden'); }, 1000);
  });

  if (sizzle.on_load) {
    sizzle.on_load.forEach(function(f) {
      f();
    });
  }
});
</script>
</body>
</html>