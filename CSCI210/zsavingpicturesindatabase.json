{"version":2,"kind":"Article","sha256":"88074ad7aa142dab0294632d205175ab6092b8aa90dc96fa6bba570d5bcdc2a5","slug":"zsavingpicturesindatabase","location":"/zSavingPicturesInDatabase.md","dependencies":[],"frontmatter":{"title":"Saving Pictures In Database","content_includes_title":false,"authors":[{"nameParsed":{"literal":"James Goudy","given":"James","family":"Goudy"},"name":"James Goudy","id":"contributors-a_books\\csci210_webprog\\wpbook\\myst-generated-uid-0"}],"copyright":"2024 By James Goudy","thumbnail":"/CSCI210/build/image-20231110172412-f6ea1fad927e6d0dca2447d64f3399ce.png","exports":[{"format":"md","filename":"zSavingPicturesInDatabase.md","url":"/CSCI210/build/zSavingPicturesInDat-b622e04b994bba43532b8c0bbcaa9497.md"}]},"mdast":{"type":"root","children":[{"type":"block","children":[{"type":"heading","depth":2,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Picture File Sizes","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"UgP43I05Xe"}],"identifier":"picture-file-sizes","label":"Picture File Sizes","html_id":"picture-file-sizes","implicit":true,"key":"KKxRpWi9xi"},{"type":"paragraph","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Upload sizes are controlled  in the php.ini file","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"o01QoVAXtB"}],"key":"ksk1jWofF2"},{"type":"paragraph","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"PHP allows shortcuts for byte values, including K (kilo), M (mega), and G (giga). PHP will do the conversions automatically if you use any of these. Be careful not to exceed the 32-bit signed integer limit (if you’re using 32-bit versions)  as it will cause your script to fail.","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"LZ9nI3q3uL"}],"key":"b2OvzrMJIe"},{"type":"paragraph","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"NOTE: The php.ini and the my.ini can be accessed through the XAMPP control panel.","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"AbpwMETsaM"}],"key":"fCEkxmhk1N"},{"type":"heading","depth":3,"position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"Portions of the php.ini file","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"E0KnC66xBj"}],"identifier":"portions-of-the-php-ini-file","label":"Portions of the php.ini file","html_id":"portions-of-the-php-ini-file","implicit":true,"key":"OKXFSVrl1w"},{"type":"code","lang":"ini","value":"; Maximum size of POST data that PHP will accept.\n; Its value may be 0 to disable the limit. It is ignored if POST data reading\n; is disabled through enable_post_data_reading.\n; https://php.net/post-max-size\npost_max_size=40M\n\n;;;;;;;;;;;;;;;;\n; File Uploads ;\n;;;;;;;;;;;;;;;;\n\n; Whether to allow HTTP file uploads.\n; https://php.net/file-uploads\nfile_uploads=On\n\n; Temporary directory for HTTP uploaded files (will use system default if not\n; specified).\n; https://php.net/upload-tmp-dir\nupload_tmp_dir=\"C:\\xampp\\tmp\"\n\n; Maximum allowed size for uploaded files.\n; https://php.net/upload-max-filesize\nupload_max_filesize=40M\n\n; Maximum number of files that can be uploaded via a single request\nmax_file_uploads=20","position":{"start":{"line":17,"column":1},"end":{"line":43,"column":1}},"key":"hW9Thne2Mr"},{"type":"paragraph","position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"children":[{"type":"text","value":"And/Or","position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"key":"BtdK6oSHc3"}],"key":"Wp7Q0LvdKA"},{"type":"heading","depth":3,"position":{"start":{"line":47,"column":1},"end":{"line":47,"column":1}},"children":[{"type":"text","value":"my.ini file for mysql","position":{"start":{"line":47,"column":1},"end":{"line":47,"column":1}},"key":"XDTWumM63n"}],"identifier":"my-ini-file-for-mysql","label":"my.ini file for mysql","html_id":"my-ini-file-for-mysql","implicit":true,"key":"RZeBpDrzwS"},{"type":"paragraph","position":{"start":{"line":49,"column":1},"end":{"line":49,"column":1}},"children":[{"type":"text","value":"The error message “SQLSTATE[HY000]: General error: 2006 MySQL server has gone away” usually occurs when the MySQL server is not responding to the client’s requests. This error can be caused by a variety of reasons, such as a low value of the max_allowed_packet variable, a low value of the wait_timeout variable, or insufficient memory on the server","position":{"start":{"line":49,"column":1},"end":{"line":49,"column":1}},"key":"zIvEMdWJLN"}],"key":"JHe1ftmFd6"},{"type":"paragraph","position":{"start":{"line":51,"column":1},"end":{"line":51,"column":1}},"children":[{"type":"text","value":"To fix this error, you can try the following steps:","position":{"start":{"line":51,"column":1},"end":{"line":51,"column":1}},"key":"JfhoUBqO9v"}],"key":"O2qAfmRyl4"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":53,"column":1},"end":{"line":56,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":53,"column":1},"end":{"line":53,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Increase the value of the max_allowed_packet variable in the my.cnf configuration file. ","position":{"start":{"line":53,"column":1},"end":{"line":53,"column":1}},"key":"o4wadf2aSl"},{"type":"link","url":"https://stackoverflow.com/questions/7942154/mysql-error-2006-mysql-server-has-gone-away","position":{"start":{"line":53,"column":1},"end":{"line":53,"column":1}},"children":[{"type":"text","value":"You can set it to 16M or higher ","position":{"start":{"line":53,"column":1},"end":{"line":53,"column":1}},"key":"eBrwEH6MfI"}],"urlSource":"https://stackoverflow.com/questions/7942154/mysql-error-2006-mysql-server-has-gone-away","key":"vfD4zFcdl2"},{"type":"link","url":"https://stackoverflow.com/questions/7942154/mysql-error-2006-mysql-server-has-gone-away","position":{"start":{"line":53,"column":1},"end":{"line":53,"column":1}},"children":[{"type":"text","value":"1","position":{"start":{"line":53,"column":1},"end":{"line":53,"column":1}},"key":"Z8hnIjga2K"}],"urlSource":"https://stackoverflow.com/questions/7942154/mysql-error-2006-mysql-server-has-gone-away","key":"adageAmSDT"},{"type":"text","value":".","position":{"start":{"line":53,"column":1},"end":{"line":53,"column":1}},"key":"BLwB5uldUm"}],"key":"ciTiZBssb1"}],"key":"mBX9amUSqg"},{"type":"listItem","spread":true,"position":{"start":{"line":54,"column":1},"end":{"line":54,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Increase the value of the wait_timeout variable in the my.cnf configuration file. ","position":{"start":{"line":54,"column":1},"end":{"line":54,"column":1}},"key":"tBjt0CuRyK"},{"type":"link","url":"https://www.prestashop.com/forums/topic/1051481-error-mysql-general-error-2006-mysql-server-has-gone-away/","position":{"start":{"line":54,"column":1},"end":{"line":54,"column":1}},"children":[{"type":"text","value":"You can set it to 28800 or higher ","position":{"start":{"line":54,"column":1},"end":{"line":54,"column":1}},"key":"mnhqdMp4My"}],"urlSource":"https://www.prestashop.com/forums/topic/1051481-error-mysql-general-error-2006-mysql-server-has-gone-away/","key":"TU9f3LjPfJ"},{"type":"link","url":"https://www.prestashop.com/forums/topic/1051481-error-mysql-general-error-2006-mysql-server-has-gone-away/","position":{"start":{"line":54,"column":1},"end":{"line":54,"column":1}},"children":[{"type":"text","value":"3","position":{"start":{"line":54,"column":1},"end":{"line":54,"column":1}},"key":"BZJkGljHYa"}],"urlSource":"https://www.prestashop.com/forums/topic/1051481-error-mysql-general-error-2006-mysql-server-has-gone-away/","key":"imniJ2Sv2f"},{"type":"text","value":".","position":{"start":{"line":54,"column":1},"end":{"line":54,"column":1}},"key":"jmuzJUSkq7"}],"key":"ftyhRg5udM"}],"key":"bldyXzjeJ5"},{"type":"listItem","spread":true,"position":{"start":{"line":55,"column":1},"end":{"line":56,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Check the memory usage of the server. ","position":{"start":{"line":55,"column":1},"end":{"line":55,"column":1}},"key":"Z7bik4pVqF"},{"type":"link","url":"https://stackoverflow.com/questions/7942154/mysql-error-2006-mysql-server-has-gone-away","position":{"start":{"line":55,"column":1},"end":{"line":55,"column":1}},"children":[{"type":"text","value":"If the server is running out of memory, you can add a swap file to increase the available memory ","position":{"start":{"line":55,"column":1},"end":{"line":55,"column":1}},"key":"Pdd6KPhnzY"}],"urlSource":"https://stackoverflow.com/questions/7942154/mysql-error-2006-mysql-server-has-gone-away","key":"PRXde4N1qV"},{"type":"link","url":"https://stackoverflow.com/questions/7942154/mysql-error-2006-mysql-server-has-gone-away","position":{"start":{"line":55,"column":1},"end":{"line":55,"column":1}},"children":[{"type":"text","value":"1","position":{"start":{"line":55,"column":1},"end":{"line":55,"column":1}},"key":"Iq4aqNPVMc"}],"urlSource":"https://stackoverflow.com/questions/7942154/mysql-error-2006-mysql-server-has-gone-away","key":"CAS6JZ4oOP"},{"type":"text","value":".","position":{"start":{"line":55,"column":1},"end":{"line":55,"column":1}},"key":"PfYtjUFdNP"}],"key":"akGoc3UFFH"}],"key":"asmegxlnzH"}],"key":"ypApIKtiFY"},{"type":"paragraph","position":{"start":{"line":57,"column":1},"end":{"line":57,"column":1}},"children":[{"type":"link","url":"https://stackoverflow.com/questions/7942154/mysql-error-2006-mysql-server-has-gone-away","position":{"start":{"line":57,"column":1},"end":{"line":57,"column":1}},"children":[{"type":"text","value":"If none of these steps work, you can try to reconnect to the MySQL server and execute the query again ","position":{"start":{"line":57,"column":1},"end":{"line":57,"column":1}},"key":"wC3YcAXtkI"}],"urlSource":"https://stackoverflow.com/questions/7942154/mysql-error-2006-mysql-server-has-gone-away","key":"EOGaHPUKQV"},{"type":"link","url":"https://stackoverflow.com/questions/7942154/mysql-error-2006-mysql-server-has-gone-away","position":{"start":{"line":57,"column":1},"end":{"line":57,"column":1}},"children":[{"type":"text","value":"1","position":{"start":{"line":57,"column":1},"end":{"line":57,"column":1}},"key":"cZYrcJ8mfb"}],"urlSource":"https://stackoverflow.com/questions/7942154/mysql-error-2006-mysql-server-has-gone-away","key":"NBrLHixx7z"},{"type":"text","value":". If the problem persists, you may need to contact your system administrator or MySQL support for further assistance.","position":{"start":{"line":57,"column":1},"end":{"line":57,"column":1}},"key":"fQdQcoWRJG"}],"key":"JS1Ey92WJO"},{"type":"code","lang":"ini","value":"# The MySQL server\ndefault-character-set=utf8mb4\n[mysqld]\nport=3306\nsocket=\"C:/xampp/mysql/mysql.sock\"\nbasedir=\"C:/xampp/mysql\"\ntmpdir=\"C:/xampp/tmp\"\ndatadir=\"C:/xampp/mysql/data\"\npid_file=\"mysql.pid\"\n# enable-named-pipe\nkey_buffer=16M\n# **********Change to 16 or Greater ****************\nmax_allowed_packet=16M\n# **************************************************\nsort_buffer_size=512K\nnet_buffer_length=8K\nread_buffer_size=256K\nread_rnd_buffer_size=512K\nmyisam_sort_buffer_size=8M\nlog_error=\"mysql_error.log\"","position":{"start":{"line":59,"column":1},"end":{"line":80,"column":1}},"key":"OKQsH3A1GX"},{"type":"heading","depth":2,"position":{"start":{"line":86,"column":1},"end":{"line":86,"column":1}},"children":[{"type":"text","value":"SQL Doggy Database","position":{"start":{"line":86,"column":1},"end":{"line":86,"column":1}},"key":"dWlTReATed"}],"identifier":"sql-doggy-database","label":"SQL Doggy Database","html_id":"sql-doggy-database","implicit":true,"key":"rFlpfV8AqR"},{"type":"code","lang":"sql","value":"-- phpMyAdmin SQL Dump\n-- version 5.2.1\n-- https://www.phpmyadmin.net/\n--\n-- Host: 127.0.0.1\n-- Generation Time: Nov 09, 2023 at 03:39 AM\n-- Server version: 10.4.28-MariaDB\n-- PHP Version: 8.2.4\n\nSET SQL_MODE = \"NO_AUTO_VALUE_ON_ZERO\";\nSTART TRANSACTION;\n\n\n/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;\n/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;\n/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;\n/*!40101 SET NAMES utf8mb4 */;\n\n--\n-- Database: `wp_doggyembed`\n--\nDROP DATABASE IF EXISTS `wp_doggyembed`;\nCREATE DATABASE IF NOT EXISTS `wp_doggyembed` DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci;\nUSE `wp_doggyembed`;\n\n-- --------------------------------------------------------\n\n--\n-- Table structure for table `table1`\n--\n\nCREATE TABLE IF NOT EXISTS `table1` (\n  `dogname` varchar(255) NOT NULL,\n  `dogbreed` varchar(255) NOT NULL,\n  `dogimage` longblob NOT NULL,\n  `imagetype` varchar(255) NOT NULL,\n  `imagesize` int(45) NOT NULL,\n  `table1_pk` int(9) NOT NULL AUTO_INCREMENT,\n  PRIMARY KEY (`table1_pk`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;\n\n--\n-- Truncate table before insert `table1`\n--\n\nTRUNCATE TABLE `table1`;COMMIT;\n\n/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;\n/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;\n/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;\n","position":{"start":{"line":88,"column":1},"end":{"line":140,"column":1}},"key":"lfRFzvcEAP"},{"type":"heading","depth":2,"position":{"start":{"line":146,"column":1},"end":{"line":146,"column":1}},"children":[{"type":"text","value":"dbconnect.php","position":{"start":{"line":146,"column":1},"end":{"line":146,"column":1}},"key":"bpY3uGRMaO"}],"identifier":"dbconnect-php","label":"dbconnect.php","html_id":"dbconnect-php","implicit":true,"key":"ZBJLzhuHR5"},{"type":"code","lang":"php","value":"<?php\n\ntry{\n\n    //table1 \n    \n    $host = \"127.0.0.1:3308\";\n    $user = \"root\";\n    $pw = \"\";\n\n    // created a pdo object  \n    // in production change the user with appropriate privs\n    $pdo = new PDO('mysql:host=127.0.0.1:3308;dbname=wp_doggyembed',$user,$pw);\n\n    // lets setup some attributes for the object\n    $pdo->setAttribute(PDO::ATTR_ERRMODE,PDO::ERRMODE_EXCEPTION);\n\n    // only for educational purposes\n    $dbstatus = \"Good database connection\";\n\n    echo($dbstatus.'<br><hr><br>');\n\n}\ncatch(PDOException $ep)\n{\n    $dbstatus = \"Database connection failed<br>\".\n                    $ep->getMessage();\n\n    // for development purposes\n    echo($dbstatus.'<br><hr><br>');\n\n    die();\n    // can also use exit\n    // we don't page to load any further\\\n}\ncatch(Exception $e)\n{\n    $dbstatus = \"Database connection failed<br>\".\n                    $e->getMessage();\n    \n    echo($dbstatus.'<br><hr><br>');\n\n    die();\n}\n\nsession_start();\n\n?>","position":{"start":{"line":148,"column":1},"end":{"line":197,"column":1}},"key":"kxKhQlLf49"},{"type":"heading","depth":2,"position":{"start":{"line":201,"column":1},"end":{"line":201,"column":1}},"children":[{"type":"text","value":"index.php","position":{"start":{"line":201,"column":1},"end":{"line":201,"column":1}},"key":"gVxDbZEO3V"}],"identifier":"index-php","label":"index.php","html_id":"index-php","implicit":true,"key":"kMLPeyUMbk"},{"type":"code","lang":"php","value":"<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Home</title>\n    <link rel=\"stylesheet\" href=\"style.css\">\n</head>\n<body>\n    <div class = \"content\">\n        <h1>Picture Embedding</h1>\n\n        <p> <a href=\"doggyinput.php\">Dog Picture Input</a> &nbsp;&nbsp;\n            <a href=\"getpix.php\">Display Doggy Pictgures</a> &nbsp; &nbsp;\n            <a href=\"default.php\">home</a>\n        </p>\n\n    </div>\n</body>\n</html>","position":{"start":{"line":203,"column":1},"end":{"line":224,"column":1}},"key":"kepCFvOR8W"},{"type":"heading","depth":2,"position":{"start":{"line":230,"column":1},"end":{"line":230,"column":1}},"children":[{"type":"text","value":"doggyinput.php","position":{"start":{"line":230,"column":1},"end":{"line":230,"column":1}},"key":"QjapY6W5Jc"}],"identifier":"doggyinput-php","label":"doggyinput.php","html_id":"doggyinput-php","implicit":true,"key":"MjlwMR9Yaa"},{"type":"paragraph","position":{"start":{"line":232,"column":1},"end":{"line":232,"column":1}},"children":[{"type":"text","value":"The ","position":{"start":{"line":232,"column":1},"end":{"line":232,"column":1}},"key":"U64iYMt3Ul"},{"type":"inlineCode","value":"enctype=\"multipart/form-data\"","position":{"start":{"line":232,"column":1},"end":{"line":232,"column":1}},"key":"uH8KtgiyoY"},{"type":"text","value":" attribute in an HTML ","position":{"start":{"line":232,"column":1},"end":{"line":232,"column":1}},"key":"Cyac4oeKYF"},{"type":"inlineCode","value":"<form>","position":{"start":{"line":232,"column":1},"end":{"line":232,"column":1}},"key":"b0LBmDQRi6"},{"type":"text","value":" specifies how form data should be encoded when it’s submitted to the server. Here’s a breakdown:","position":{"start":{"line":232,"column":1},"end":{"line":232,"column":1}},"key":"z7hzp97v64"}],"key":"LKMQTSrjwE"},{"type":"heading","depth":3,"position":{"start":{"line":234,"column":1},"end":{"line":234,"column":1}},"children":[{"type":"text","value":"Context","position":{"start":{"line":234,"column":1},"end":{"line":234,"column":1}},"key":"UPoPPTGYhN"}],"identifier":"context","label":"Context","html_id":"context","implicit":true,"key":"YdFNWE6Sj1"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":236,"column":1},"end":{"line":238,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":236,"column":1},"end":{"line":236,"column":1}},"children":[{"type":"paragraph","children":[{"type":"strong","position":{"start":{"line":236,"column":1},"end":{"line":236,"column":1}},"children":[{"type":"text","value":"Used in:","position":{"start":{"line":236,"column":1},"end":{"line":236,"column":1}},"key":"u89nSAcgsB"}],"key":"XCPyKRD5j1"},{"type":"text","value":" ","position":{"start":{"line":236,"column":1},"end":{"line":236,"column":1}},"key":"iuV62KqkK2"},{"type":"inlineCode","value":"<form>","position":{"start":{"line":236,"column":1},"end":{"line":236,"column":1}},"key":"oNQFBn7ELh"},{"type":"text","value":" element","position":{"start":{"line":236,"column":1},"end":{"line":236,"column":1}},"key":"sR6FVrVWWz"}],"key":"KE06UraufE"}],"key":"d834Y2BQD4"},{"type":"listItem","spread":true,"position":{"start":{"line":237,"column":1},"end":{"line":238,"column":1}},"children":[{"type":"paragraph","children":[{"type":"strong","position":{"start":{"line":237,"column":1},"end":{"line":237,"column":1}},"children":[{"type":"text","value":"Purpose:","position":{"start":{"line":237,"column":1},"end":{"line":237,"column":1}},"key":"zfJFw58uDI"}],"key":"FTAu607IKt"},{"type":"text","value":" Defines how form data is sent to the server.","position":{"start":{"line":237,"column":1},"end":{"line":237,"column":1}},"key":"qXTpjOE8R4"}],"key":"uKIyGp3zuR"}],"key":"qW6GCYSJha"}],"key":"yMOtSTiRqg"},{"type":"heading","depth":3,"position":{"start":{"line":239,"column":1},"end":{"line":239,"column":1}},"children":[{"type":"text","value":"Why use ","position":{"start":{"line":239,"column":1},"end":{"line":239,"column":1}},"key":"CAjguOBo3Y"},{"type":"inlineCode","value":"multipart/form-data","position":{"start":{"line":239,"column":1},"end":{"line":239,"column":1}},"key":"bLgZtx7aqW"},{"type":"text","value":"?","position":{"start":{"line":239,"column":1},"end":{"line":239,"column":1}},"key":"GFSxJrkqJo"}],"identifier":"why-use-multipart-form-data","label":"Why use multipart/form-data?","html_id":"why-use-multipart-form-data","implicit":true,"key":"HGp1fDxgnZ"},{"type":"paragraph","position":{"start":{"line":241,"column":1},"end":{"line":241,"column":1}},"children":[{"type":"text","value":"It is necessary when a form includes file uploads, like images, documents, etc. It allows the form to send data in a way that supports sending both text and binary data.","position":{"start":{"line":241,"column":1},"end":{"line":241,"column":1}},"key":"E73DXYhVCM"}],"key":"p4q99F1k2m"},{"type":"heading","depth":3,"position":{"start":{"line":243,"column":1},"end":{"line":243,"column":1}},"children":[{"type":"text","value":"How it works","position":{"start":{"line":243,"column":1},"end":{"line":243,"column":1}},"key":"tspuQDOcMK"}],"identifier":"how-it-works","label":"How it works","html_id":"how-it-works","implicit":true,"key":"XYwqVnvVTI"},{"type":"paragraph","position":{"start":{"line":245,"column":1},"end":{"line":245,"column":1}},"children":[{"type":"text","value":"When ","position":{"start":{"line":245,"column":1},"end":{"line":245,"column":1}},"key":"c2xkWPsskS"},{"type":"inlineCode","value":"enctype=\"multipart/form-data\"","position":{"start":{"line":245,"column":1},"end":{"line":245,"column":1}},"key":"PafPR0L1Ov"},{"type":"text","value":" is set:","position":{"start":{"line":245,"column":1},"end":{"line":245,"column":1}},"key":"Fb3tT4cUeZ"}],"key":"ic7umRqDn6"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":247,"column":1},"end":{"line":252,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":247,"column":1},"end":{"line":247,"column":1}},"children":[{"type":"paragraph","children":[{"type":"strong","position":{"start":{"line":247,"column":1},"end":{"line":247,"column":1}},"children":[{"type":"text","value":"Each form field’s data","position":{"start":{"line":247,"column":1},"end":{"line":247,"column":1}},"key":"W2WpJ9i0OG"}],"key":"dSQccpXiDC"},{"type":"text","value":" is sent as a separate part of the request body.","position":{"start":{"line":247,"column":1},"end":{"line":247,"column":1}},"key":"aOCg11LkxF"}],"key":"wot1KTRiRy"}],"key":"rJHE7FofTT"},{"type":"listItem","spread":true,"position":{"start":{"line":248,"column":1},"end":{"line":248,"column":1}},"children":[{"type":"paragraph","children":[{"type":"strong","position":{"start":{"line":248,"column":1},"end":{"line":248,"column":1}},"children":[{"type":"text","value":"File data","position":{"start":{"line":248,"column":1},"end":{"line":248,"column":1}},"key":"BQS13cWd6D"}],"key":"ACKPHRa9Du"},{"type":"text","value":" is encoded in binary, while other fields (e.g., text inputs) are encoded as plain text.","position":{"start":{"line":248,"column":1},"end":{"line":248,"column":1}},"key":"z1vQg9rOAj"}],"key":"zpOw1vOPU5"}],"key":"kSawPuW7Il"},{"type":"listItem","spread":true,"position":{"start":{"line":249,"column":1},"end":{"line":252,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Each part is separated by a ","position":{"start":{"line":249,"column":1},"end":{"line":249,"column":1}},"key":"JwfsAlThlR"},{"type":"strong","position":{"start":{"line":249,"column":1},"end":{"line":249,"column":1}},"children":[{"type":"text","value":"boundary string","position":{"start":{"line":249,"column":1},"end":{"line":249,"column":1}},"key":"F8WUhGxplR"}],"key":"kdtjdudrHd"},{"type":"text","value":" that the browser generates, making it easy for the server to parse the data correctly.","position":{"start":{"line":249,"column":1},"end":{"line":249,"column":1}},"key":"ZbOnNczwc8"}],"key":"MF8mTb6lRx"}],"key":"RorfyAifBr"}],"key":"APqMYMjbRM"},{"type":"code","lang":"php","value":"\n<!DOCTYPE html>\n<html>\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Input</title>\n    <link rel=\"stylesheet\" href=\"style.css\">\n</head>\n<body>\n    <header>\n        <h1>Doggy Picture Upload</h1>\n    </header>\n    <main>\n\n<?php\n\nrequire('dbconnect.php');\n\n// for testing and demonstonly\n// print_r($_POST);\n// echo('<br>');\n// print_r($_FILES);\n// echo('<br><hr><br>');\n\nif(isset($_POST['dogname']) && !empty($_POST['dogname']))\n{\n\n\n    // get file specifications\n    $thedogfile = $_FILES['dogimage']['tmp_name'];\n    $imagetype = mime_content_type($thedogfile);\n    $imagesize = filesize($thedogfile);\n\n    // Retrieve the file and encode it as base64\n    // Base64 is a common form of handling data and it is used to ensure\n    // that the handling of bits accros the network are correct.\n\n    $dogimage = base64_encode(file_get_contents($_FILES['dogimage']['tmp_name']));\n\n    // sql statement\n    $sql = \"INSERT INTO table1(dogname,dogbreed,dogimage,imagetype,imagesize) \".\n            \"VALUES(:dogname,:dogbreed,:dogimage,:imagetype,:imagesize)\";\n    \n    // prepare sql statement\n    $sqlobj = $pdo->prepare($sql);\n\n    // sanitize input\n    $dogname = filter_var($_POST['dogname'],FILTER_SANITIZE_STRING);\n    $dogbreed = filter_var($_POST['dogbreed'],FILTER_SANITIZE_STRING);\n\n    // bind\n    $sqlobj->bindparam(':dogname',$dogname);\n    $sqlobj->bindparam(':dogbreed',$dogbreed);\n    $sqlobj->bindparam(':dogimage',$dogimage,PDO::PARAM_LOB);\n    $sqlobj->bindparam(':imagetype',$imagetype);\n    $sqlobj->bindparam(':imagesize',$imagesize);\n\n\n    try{\n        // execute the upload\n        $uploadcheck = $sqlobj->execute();\n    }\n    catch(PDOException $e)\n    {\n        $uploadcheck = false;\n        echo(\"<br>Upload Failed: \".$e->getMessage());\n    }\n\n    if($uploadcheck)\n    {\n        echo('\n            <br><br>File Uploaded Successfully<br><br>\n        ');\n    }\n\n\n}\nelse\n{\n    \n    // *** NOTE enctype=\"multipart/form-data\" ***\n    // The enctype=\"multipart/form-data\" attribute in an HTML <form> \n    // is used when submitting forms that include file uploads. \n    // It ensures that the form data is sent in separate parts, \n    // allowing both text and binary data (like files) to be transmitted. \n    // This encoding is necessary for handling file uploads, \n    // as it allows the server to process each part correctly, \n    // separating text fields from file data.\n    // *******************************************************************\n\n    \necho('\n    <form action=\"doggyinput.php\" method=\"POST\" enctype=\"multipart/form-data\">\n        <table border=\"1\">\n            <tr>\n                <th colspan=2>Doggy Input</th>\n            </tr>\n            <tr>\n                <td>Dog Name</td>\n                <td><input type=\"text\" size=\"25\" name=\"dogname\" \n                    value=\"barky\" required> </td>\n            </tr>\n            <tr>\n                <td>Dog Name</td>\n                <td><input type=\"text\" size=\"25\" name=\"dogbreed\" \n                    value=\"mutt\"> </td>\n            </tr>\n            <tr>\n                <td>Dog Name</td>\n                <td><input type=\"file\" \n                    name=\"dogimage\" \n                    accept=\".jpg,.jpeg,.png\" \n                    required> </td>\n            </tr>\n            <tr>\n                <td></td>\n                <td><input type=\"submit\" value=\"Enter\"></td>\n            </tr>\n        </table>\n        </form>\n    ');\n}  //end of else\n?>\n    <p><a href=\"doggyinput.php\">Dog Picture Input</a> &nbsp;&nbsp;\n    <a href=\"getpix.php\">Display Doggy Pictures</a> &nbsp;&nbsp;\n    <a href=\"index.php\">Home</a>\n</p></main>\n<footer>&copy;Doggy Embed Demo</footer>\n</body>\n</html>');\n\n\n<?php\n/*\nUpload sizes are controlled in the php.ini file\n\nItems to check\n; Maximum size of POST data that PHP will accept.\n; Its value may be 0 to disable the limit. It is ignored if POST data reading\n; is disabled through enable_post_data_reading.\n; https://php.net/post-max-size\npost_max_size=40M\n\nNote:\nPHP allows shortcuts for byte values, including K (kilo), M (mega) and G (giga). \nPHP will do the conversions automatically if you use any of these. Be careful \nnot to exceed the 32 bit signed integer limit (if you're using 32bit versions) \nas it will cause your script to fail. \n\n\n;;;;;;;;;;;;;;;;\n; File Uploads ;\n;;;;;;;;;;;;;;;;\n\n; Whether to allow HTTP file uploads.\n; https://php.net/file-uploads\nfile_uploads=On\n\n; Temporary directory for HTTP uploaded files (will use system default if not\n; specified).\n; https://php.net/upload-tmp-dir\nupload_tmp_dir=\"C:\\xampp\\tmp\"\n\n; Maximum allowed size for uploaded files.\n; https://php.net/upload-max-filesize\nupload_max_filesize=40M\n\n; Maximum number of files that can be uploaded via a single request\nmax_file_uploads=20\n\n\nmy.ini file\n# The MySQL server\ndefault-character-set=utf8mb4\n[mysqld]\nport=3306\nsocket=\"C:/xampp/mysql/mysql.sock\"\nbasedir=\"C:/xampp/mysql\"\ntmpdir=\"C:/xampp/tmp\"\ndatadir=\"C:/xampp/mysql/data\"\npid_file=\"mysql.pid\"\n# enable-named-pipe\nkey_buffer=16M\n# **********Change to 16 or Greater ****************\nmax_allowed_packet=16M\n# **************************************************\nsort_buffer_size=512K\nnet_buffer_length=8K\nread_buffer_size=256K\nread_rnd_buffer_size=512K\nmyisam_sort_buffer_size=8M\nlog_error=\"mysql_error.log\"\n\n*/\n\n?>","position":{"start":{"line":253,"column":1},"end":{"line":451,"column":1}},"key":"RGO1ib57Wd"},{"type":"image","url":"/CSCI210/build/image-20231110172412-f6ea1fad927e6d0dca2447d64f3399ce.png","alt":"image-20231110172412478","position":{"start":{"line":455,"column":1},"end":{"line":455,"column":1}},"key":"fqp6Z7dY01","urlSource":"assets/image-20231110172412478-1699662255420-5.png"},{"type":"heading","depth":2,"position":{"start":{"line":459,"column":1},"end":{"line":459,"column":1}},"children":[{"type":"text","value":"getpix.php","position":{"start":{"line":459,"column":1},"end":{"line":459,"column":1}},"key":"JGGk6TETAa"}],"identifier":"getpix-php","label":"getpix.php","html_id":"getpix-php","implicit":true,"key":"RAjioWvXJ9"},{"type":"code","lang":"php","value":"<?php\n    // database connection\n    require('dbconnect.php');\n\n    // SQL statement\n    $sql = \"SELECT * FROM table1\";\n\n    // Excecute query and store recordset\n    $rs = $pdo->query($sql);\n\n?>\n\n<!DOCTYPE html>\n<html>\n<head> \n<meta charset=\"UTF-8\">\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    \n<title>GetPix</title>   \n<link rel=\"stylesheet\" href=\"style.css\">\n</head>\n\n<body>\n    <header>\n        <h1>Doggy Pictures</h1>\n        <p><a href=\"doggyinput.php\">Dog Picture Input</a> &nbsp;&nbsp;\n        <a href=\"getpix.php\">Display Doggy Pictures</a> &nbsp;&nbsp;\n        <a href=\"index.php\">Home</a></p>\n    </header>\n\n    <main>\n        <p>Here are the doggies</p>\n\n        <?php\n        while($row=$rs->fetch())\n        {\n            echo('<div class=\"dogpix\">');\n            \n            // retreive the image\n            // build data url - example 'data:image/jeg;base64,mypix.jpg'\n\n            echo('<img src=\"data:'.$row['imagetype'].\n                    ';base64,'.$row['dogimage'].'\" width=\"300\"><br>');\n            echo($row['dogname'].'<br>'.$row['dogbreed']);\n\n            echo('</div><br>');\n            \n        }\n        ?>\n        <p><a href=\"doggyinput.php\">Dog Picture Input</a> &nbsp;&nbsp;\n        <a href=\"getpix.php\">Display Doggy Pictures</a> &nbsp;&nbsp;\n        <a href=\"index.php\">Home</a></p>\n    </main>\n\n    <footer>\n        <p>&copy; 2023 Get Doggy Pix </p>\n    </footer>\n</body>\n</html>","position":{"start":{"line":461,"column":1},"end":{"line":521,"column":1}},"key":"Zm2R4UhBCD"},{"type":"image","url":"/CSCI210/build/image-20231110172320-ea959a122bd0805c7907f7116c8c7838.png","alt":"image-20231110172320987","position":{"start":{"line":523,"column":1},"end":{"line":523,"column":1}},"key":"iKCeZ2s8u7","urlSource":"assets/image-20231110172320987-1699662202862-3.png"},{"type":"heading","depth":2,"position":{"start":{"line":527,"column":1},"end":{"line":527,"column":1}},"children":[{"type":"text","value":"style.css","position":{"start":{"line":527,"column":1},"end":{"line":527,"column":1}},"key":"GOiGqTBxzz"}],"identifier":"style-css","label":"style.css","html_id":"style-css","implicit":true,"key":"WguJSK5kl3"},{"type":"code","lang":"css","value":"header, main, footer {\n    width: 60%;\n    margin-left: auto;\n    margin-right:auto;  \n}\n\n.dogpix {\n    width: 300px;\n    border: 3px solid darkblue;\n    background-color: darkgrey;\n    margin-left: auto;\n    margin-right:auto;\n    text-align: center;\n    font-weight: bold;\n}","position":{"start":{"line":529,"column":1},"end":{"line":545,"column":1}},"key":"NRJq2mPyyk"}],"key":"D2HfdOXLKC"}],"key":"QXe8kZKlNE"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"Add Edit Delete","url":"/zaddeditdelete","group":"Web Programming"},"next":{"title":"Reading json","url":"/zreadingjson","group":"Web Programming"}}},"domain":"http://localhost:3000"}