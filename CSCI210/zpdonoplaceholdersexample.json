{"version":2,"kind":"Article","sha256":"c063385add192cfd883ac3b0e64f3d43f29af962b0fa23e60699e078efcf8d5c","slug":"zpdonoplaceholdersexample","location":"/zPDONoPlaceHoldersExample.md","dependencies":[],"frontmatter":{"title":"PDO With No Named Placeholders","content_includes_title":false,"authors":[{"nameParsed":{"literal":"James Goudy","given":"James","family":"Goudy"},"name":"James Goudy","id":"contributors-a_books\\csci210_webprog\\wpbook\\myst-generated-uid-0"}],"copyright":"2024 By James Goudy","numbering":{"title":{"offset":1}},"exports":[{"format":"md","filename":"zPDONoPlaceHoldersExample.md","url":"/CSCI210/build/zPDONoPlaceHoldersEx-f94ded23c800b59a745382aee732d9b7.md"}]},"mdast":{"type":"root","children":[{"type":"block","children":[{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"This example shows how to use SQL with no named placeholders.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"vL0CF4INIY"}],"key":"CA4Ym6xIu6"},{"type":"code","lang":"php","value":"<!DOCTYPE html>\n<html>\n<head>\n<title>function example</title>\n\n\t<!-- css styling -->\n\t<style>\n\t\t#div1{\n\t\t\tbackground-color:cornsilk;\n\t\t\twidth:65%;\n\t\t\tmargin-left:auto;\n\t\t\tmargin-right:auto;\n\t\t}\n\t</style>\n\n</head>\n<body>\n    <?php\n\n        //database connection\n        function newDB(){\n            //returns a database object\n            return new PDO('mysql:host=127.0.0.1;dbname=wp_cars','root','');\n        }\n\n        function pdoInsert(){\n\n            // open new datbase connection\n            $pdo = newDB();\n\n            // instantiate variables\n            // remember the don't come into existance\n            // until a value has been assigned to them\n\n            $ownerFN \t= \"Bubba\";\n            $ownerLN\t= \"Smith\";\n            $make\t\t= \"Scion\";\n            $model\t\t= \"XB\";\n            $carYear\t= rand(2000,2012);\n            $color\t\t= \"Blue\";\n\n            try\n            {\n                // SQL Statement\n                $sql_stmt = \"INSERT INTO tbl_car(OwnerFN,OwnerLN,make,model,carYear,color) \n                        VALUES (?,?,?,?,?,?)\";\n\n                // prepare\n                $pdo = $pdo->prepare($sql_stmt);\n\n                // bind our parameters\n                $pdo->bindParam(1,$ownerFN);\n                $pdo->bindParam(2,$ownerLN);\n                $pdo->bindParam(3,$make);\n                $pdo->bindParam(4,$model);\n                $pdo->bindParam(5,$carYear);\n                $pdo->bindParam(6,$color);\n\n                // generate some database\n                // normally where you assign $_POST variable\n                // which has been sanitized to variable\n\n                // for this example auto generate some database\n\n                $numRecs = rand(5,10);\n\n                for($i = 0; $i < $numRecs; $i++)\n                {\n                    $arn \t\t= rand(0,1000);\n\n                    // normally the $_POST variable is \n                    // sanitized and assigned a local variable\n\n                    // $ownerFN = filter_var($_POST['ownerFN'],FILTER_SANITIZE_STRING);\n\n                    $ownerFN \t= \"Bubba\".$arn;\n                    $ownerLN \t= \"Smith\".$arn;\n                    $make \t\t= \"Ford\".$arn;\n                    $model \t\t= \"Mach E\".$arn;\n                    $carYear \t= rand(2020,2024);\n                    $color \t\t= \"red\";\n\n                    // since the variables are already bound\n                    // we can just call execute()\n\n                    $pdo->execute();\n                }\n\n            }\n            catch(PDOException $epdo)\n            {\n                // In production, errors be redirect to an error page\n                echo($pdo->getMessage());\n            }\n\n            // always closse our connection\n            $pdo = null;\n        }\n\n        function printCarTable(){\n            \n            echo('\n            <div id=\"div1\">\n            <h1>Car Table</h1>\n            <a href=\"default.php\">\n                <button type=\"Button\">Refresh</button>\n                </a><br><br>\n            <table border=\"1\" width=\"100%\" align=\"center\">\n                <tr>\n                    <td>Owner FN</td>\n                    <td>Owner LN</td>\n                    <td>Make</td>\n                    <td>Model</td>\n                    <td>Car Year</td>\n                    <td>Color</td>\n                    <td>Car ID</td>\t\t\t\t\n                </tr>\n            ');\n\n            // create a database connection\n            $pdo = newDB();\n\n            // setup our SQL\n            $sql = \"SELECT * FROM tbl_car\";\n\n            // executing the SQL - bring down the data\n            $dataSet = $pdo->query($sql);\n\n            // iterate through each dataSet row\n            foreach($dataSet as $row)\n            {\n                echo('<tr>');\n                echo('<td>'.$row['OwnerFN'].'</td>'.\n                        '<td>'.$row['OwnerLN'].'</td>'.\n                        '<td>'.$row['Make'].'</td>'.\n                        '<td>'.$row['Model'].'</td>'.\n                        '<td>'.$row['CarYear'].'</td>'.\n                        '<td>'.$row['Color'].'</td>'.\n                        '<td>'.$row['Car_Id'].'</td>'\t\t\t\t\n                    );\n                echo('</tr>');\n\n            }\n\n            echo('</table>\n            <br></div><br><br>');\n\n            // close the db connection\n            $pdo = null;\n\n        }\n\n\n        function clearDB()\n        {\n            try\n            {\n                // create new database connection\n                $pdo = newDB();\n\n                // execute the truncate SQL command\n                $pdo->exec(\"TRUNCATE TABLE tbl_car\");\n\n            }\n            catch(PDOException $epdo)\n            {\n                // In production, errors be redirect to an error page\n                echo(\"Error<br>\".$epdo->getMessage());\n            }\n\n            $pdo = null;\n        }\n\n        // function calls\n\n        clearDB();\n        pdoInsert();\n        printCarTable();\n\n    ?>\n</body>\n</html>","position":{"start":{"line":5,"column":1},"end":{"line":188,"column":1}},"key":"Zy7zvIFHDZ"}],"key":"LjRR92Qo6o"}],"key":"UR8viZPKa3"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"PDO - First Data Insert - Car Example","url":"/zpdofirstdatadbinsertcarexample","group":"Web Programming"},"next":{"title":"String Sanitation - filter_var()","url":"/zstringsanitation","group":"Web Programming"}}},"domain":"http://localhost:3000"}